<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- 2023-11-20 周一 03:07 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs配置文件</title>
<meta name="author" content="yenao" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="http://gongzhitaao.org/orgcss/org.css"/>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Emacs配置文件</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org598dfdb">1. 参考链接</a>
<ul>
<li><a href="#org54e4585">1.1. 面向产品经理的Emacs系列教程</a></li>
<li><a href="#org0fdc572">1.2. 面向产品经理的Emacs系列教程配套配置文件</a></li>
</ul>
</li>
<li><a href="#org61dc87a">2. early-init.el</a></li>
<li><a href="#org5665c81">3. init.el</a>
<ul>
<li><a href="#org8359418">3.1. init.el 文件头</a></li>
<li><a href="#org733a773">3.2. package包管理配置</a></li>
<li><a href="#org18f7e46">3.3. 安装use-package插件</a></li>
<li><a href="#orgf5a6a70">3.4. quelpa包管理器</a>
<ul>
<li><a href="#org7464660">3.4.1. 示例1 常规操作</a></li>
<li><a href="#org9d09acb">3.4.2. 示例2 github访问不了，使用项目镜像链接</a></li>
</ul>
</li>
<li><a href="#org3e9fbd3">3.5. 加载模块化配置</a></li>
<li><a href="#org76ebda9">3.6. init.el 文件尾</a></li>
</ul>
</li>
<li><a href="#orgb593e7a">4. init-ui.el</a>
<ul>
<li><a href="#org4a944eb">4.1. init-ui.el 文件头</a></li>
<li><a href="#org289b5d8">4.2. spacemacs-theme主题</a></li>
<li><a href="#orgf2906ff">4.3. 其他UI零散设置项</a></li>
<li><a href="#orgcfa9465">4.4. 编码设置</a></li>
<li><a href="#org612cdf9">4.5. keycast按键展示</a></li>
<li><a href="#org09ec579">4.6. shackle窗口管理</a></li>
<li><a href="#orgd063ea6">4.7. popper窗口弹出管理</a></li>
<li><a href="#orgb73c510">4.8. winner窗口管理</a></li>
<li><a href="#org53a9d2b">4.9. init-ui.el 文件尾</a></li>
</ul>
</li>
<li><a href="#org5dc2837">5. init-base.el</a>
<ul>
<li><a href="#orge30552d">5.1. init-base.el 文件头</a></li>
<li><a href="#org38448ab">5.2. savehist记住迷你缓冲区历史</a></li>
<li><a href="#org1a56ff5">5.3. saveplace记住每个文件的光标位置</a></li>
<li><a href="#orgf5208bc">5.4. undo-tree撤销设置</a></li>
<li><a href="#orga95b851">5.5. super-save自动保存</a></li>
<li><a href="#org06f3990">5.6. init-base.el 文件尾</a></li>
</ul>
</li>
<li><a href="#orgdf3f370">6. init-edit.el</a>
<ul>
<li><a href="#orge3d62f4">6.1. init-edit.el 文件头</a></li>
<li><a href="#orgc33f10a">6.2. Emacs备份设置</a></li>
<li><a href="#org8818fd9">6.3. 解除一些不常用的快捷键</a></li>
<li><a href="#org21284b5">6.4. delsel选择文本输入时直接替换</a></li>
<li><a href="#orge5e5a23">6.5. 自动重载设置</a></li>
<li><a href="#orgae9f4ee">6.6. avy光标移动</a></li>
<li><a href="#org83a59b8">6.7. amx 记录命令历史</a></li>
<li><a href="#orgc8ca349">6.8. window-numbering 快捷键切换窗口</a></li>
<li><a href="#org8ca2f45">6.9. mwim 优化光标移动到行首/行尾</a></li>
<li><a href="#org014a1bc">6.10. dashboard 配置欢迎页面</a>
<ul>
<li><a href="#orga19773c">6.10.1. projectile</a></li>
</ul>
</li>
<li><a href="#org3e1c86f">6.11. marginalia 为 Emacs minibuffer 中的选项添加注解</a></li>
<li><a href="#orgbbae752">6.12. which-key 根据快捷键前缀提示快捷键</a></li>
<li><a href="#orge7735ec">6.13. hydra 把一组特定场景的命令组织到一起， 通过简单按键来进行调用</a>
<ul>
<li><a href="#org59efc86">6.13.1. use-package-hydra</a></li>
</ul>
</li>
<li><a href="#org77af2a1">6.14. multiple-cursors多光标编辑</a></li>
<li><a href="#org9a4007f">6.15. highlight-symbol 高亮出当前 Buffer 中所有的、与光标所在处的符号相同的符号</a></li>
<li><a href="#orgc40da45">6.16. rainbow-delimiters 用不同颜色标记多级括号，方便看清代码块</a></li>
<li><a href="#orgf2a1509">6.17. evil（为 Vim 用户）</a></li>
<li><a href="#org1e72828">6.18. WorkLogReport 工作日志报告</a></li>
<li><a href="#org8541325">6.19. g-org-insert-note-header 插入一些 Org 模式的头部信息</a></li>
<li><a href="#org4833705">6.20. init-edit.el 文件尾</a></li>
</ul>
</li>
<li><a href="#org9498782">7. init-org.el</a>
<ul>
<li><a href="#orga261f18">7.1. init-org.el 文件头</a></li>
<li><a href="#org51b5194">7.2. org-appear自动展开强调链接</a></li>
<li><a href="#org46371e5">7.3. org-auto-tangle自动tangle设置</a></li>
<li><a href="#orgab1ace5">7.4. org-capture快速记录设置</a></li>
<li><a href="#org5613151">7.5. denote笔记设置</a></li>
<li><a href="#orgbc3d677">7.6. consult-notes查找笔记</a></li>
<li><a href="#org0625961">7.7. org-super-links反链设置</a></li>
<li><a href="#org7345308">7.8. ox文件导出通用设置</a></li>
<li><a href="#org10570c5">7.9. org导出后端设置</a>
<ul>
<li><a href="#org70cf43a">7.9.1. ox-html导出HTML设置</a></li>
<li><a href="#org6bfbb04">7.9.2. ox-latex导出PDF设置</a></li>
<li><a href="#orgc5aba2f">7.9.3. ox-gfm导出Markdown设置</a></li>
<li><a href="#orgd5b3e11">7.9.4. ox-publish导出静态站点设置</a></li>
<li><a href="#orgb2c8044">7.9.5. ox-hugo导出博客设置</a></li>
</ul>
</li>
<li><a href="#org955370e">7.10. toc-org目录自动生成</a></li>
<li><a href="#org79a25d9">7.11. ol新增链接类型</a></li>
<li><a href="#org5baee62">7.12. 图片粘贴</a></li>
<li><a href="#orgd00f842">7.13. init-org.el 文件尾</a></li>
</ul>
</li>
<li><a href="#orge02de09">8. init-completion.el</a>
<ul>
<li><a href="#org1aedf74">8.1. init-completion.el 文件头</a></li>
<li><a href="#org0d4fc82">8.2. vertico 提供了一个垂直样式的补全系统</a></li>
<li><a href="#org33f2ed5">8.3. orderless 插件提供一种无序的补全新姿势，将一个搜索的范式变成数个以空格分隔的部分</a></li>
<li><a href="#org9486511">8.4. marginalia 给迷你缓冲区的补全候选条目添加一些提示</a></li>
<li><a href="#org424e504">8.5. consult 基于Emacs自带的补全机制，提供了一系列的补全命令</a></li>
<li><a href="#org5b97a54">8.6. company Emacs最广为使用的补全插件</a></li>
<li><a href="#org9d7fbe1">8.7. yasnippet模板补全</a></li>
<li><a href="#orgcdaf9e5">8.8. embark 插件提供了一系列的迷你缓冲区的类似右键机制的增强</a></li>
<li><a href="#org942f372">8.9. init-completion.el 文件尾</a></li>
</ul>
</li>
<li><a href="#orgd0451f3">9. init-dired.el</a>
<ul>
<li><a href="#orga40646c">9.1. init-dired.el 文件头</a></li>
<li><a href="#orgbd41a14">9.2. init-dired.el 文件尾</a></li>
</ul>
</li>
<li><a href="#org64e6af8">10. init-tools.el</a>
<ul>
<li><a href="#org0063b00">10.1. init-tools.el 文件头</a></li>
<li><a href="#orgf9fbe55">10.2. helpful帮助增强</a></li>
<li><a href="#org4834d9a">10.3. pass密码管理</a></li>
<li><a href="#orgbd7f7ac">10.4. cnfonts 用于缩放字体</a></li>
<li><a href="#orga394cee">10.5. init-tools.el 文件尾</a></li>
</ul>
</li>
<li><a href="#org18aa7a3">11. init-rss.el</a>
<ul>
<li><a href="#org72d642a">11.1. init-rss.el 文件头</a></li>
<li><a href="#orgbf83d92">11.2. elfeed 一个非常棒的RSS新闻阅读客户端</a></li>
<li><a href="#org007664f">11.3. elfeed-goodies给elfeed优化增强</a></li>
<li><a href="#org647f62a">11.4. init-rss.el 文件尾</a></li>
</ul>
</li>
<li><a href="#org5a274e7">12. init-shell.el</a>
<ul>
<li><a href="#org7a3fa39">12.1. init-shell.el 文件头</a></li>
<li><a href="#org1daca56">12.2. eshell 基本配置</a></li>
<li><a href="#org2fc3100">12.3. eshell alias 设置</a></li>
<li><a href="#orgfd329aa">12.4. eshell 里的 C-d</a></li>
<li><a href="#orgff2090e">12.5. Eshell 的命令历史</a></li>
<li><a href="#orge1812f0">12.6. 有些命令使用 term</a></li>
<li><a href="#orgda11545">12.7. eshell-git-prompt 命令行主题</a></li>
<li><a href="#orga6e72fb">12.8. eshell-syntax-highlighting 语法高亮</a></li>
<li><a href="#org8480d83">12.9. capf-autosuggest自动补全</a></li>
<li><a href="#org61a7794">12.10. eshell-up快速进入父级文件夹</a></li>
<li><a href="#org5a6f134">12.11. init-shell.el 文件尾</a></li>
</ul>
</li>
<li><a href="#orgf8e3baf">13. init-browser.el</a>
<ul>
<li><a href="#org3cf0a4b">13.1. init-browser.el 文件头</a></li>
<li><a href="#org91e40d6">13.2. EWW 配置</a></li>
<li><a href="#org902333c">13.3. init-browser.el 文件尾</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div id="outline-container-org598dfdb" class="outline-2">
<h2 id="org598dfdb"><span class="section-number-2">1.</span> 参考链接</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org54e4585" class="outline-3">
<h3 id="org54e4585"><span class="section-number-3">1.1.</span> 面向产品经理的Emacs系列教程</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<a href="https://remacs.cc/">remacs的世界</a>
</p>

<p>
<a href="https://remacs.fun/">remacs的世界</a>
</p>
</div>
</div>

<div id="outline-container-org0fdc572" class="outline-3">
<h3 id="org0fdc572"><span class="section-number-3">1.2.</span> 面向产品经理的Emacs系列教程配套配置文件</h3>
<div class="outline-text-3" id="text-1-2">
<p>
<a href="https://github.com/wowhxj/emacs-from-scratch">面向产品经理的Emacs系列教程配套配置文件</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org61dc87a" class="outline-2">
<h2 id="org61dc87a"><span class="section-number-2">2.</span> early-init.el</h2>
<div class="outline-text-2" id="text-2">
<p>
在Emacs刚启动，还未加载主要配置文件时的配置文件。
</p>

<p>
在 Emacs Lisp 中，可以使用 functionp 函数来判断一个符号是否绑定到一个函数上。functionp 函数用于检查一个对象是否是一个函数。如果对象是一个函数，functionp 将返回 t，否则返回 nil。
</p>

<p>
下面是一个示例代码，演示了如何使用 if 条件判断函数是否存在：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #bc6ec5;">(</span>functionp 'g-org-insert-note-header<span style="color: #bc6ec5;">)</span>
    <span style="color: #bc6ec5;">(</span>message <span style="color: #2d9574;">"&#20989;&#25968; g-org-insert-note-header &#23384;&#22312;"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>message <span style="color: #2d9574;">"&#20989;&#25968; g-org-insert-note-header &#19981;&#23384;&#22312;"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">   <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">early-init.el --- Emacs pre-initialization config -*- lexical-binding: t -*-</span>
   <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

   <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#22403;&#22334;&#22238;&#25910;&#21442;&#25968;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> gc-cons-threshold most-positive-fixnum<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> gc-cons-percentage 0.6<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21551;&#21160;&#26089;&#26399;&#19981;&#21152;&#36733;`</span><span style="color: #a45bad; background-color: #292e34;">package.el</span><span style="color: #2aa1ae; background-color: #292e34;">'&#21253;&#31649;&#29702;&#22120;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> package-enable-at-startup nil<span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#20174;&#21253;&#32531;&#23384;&#20013;&#21152;&#36733;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> package-quickstart nil<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;&#23637;&#31034;&#33756;&#21333;&#26639;&#12289;&#24037;&#20855;&#26639;&#21644;&#32437;&#21521;&#28378;&#21160;&#26465;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">push</span> '<span style="color: #bc6ec5;">(</span>menu-bar-lines . 0<span style="color: #bc6ec5;">)</span> default-frame-alist<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">push</span> '<span style="color: #bc6ec5;">(</span>tool-bar-lines . 0<span style="color: #bc6ec5;">)</span> default-frame-alist<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">push</span> '<span style="color: #bc6ec5;">(</span>vertical-scroll-bars<span style="color: #bc6ec5;">)</span> default-frame-alist<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;&#33258;&#21160;&#32553;&#25918;&#31383;&#21475;&#20808;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> frame-inhibit-implied-resize t<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;Echo Area&#26174;&#31034;For information about GNU Emacs and the GNU system,type C-h C-a</span>
<span style="color: #4f97d7;">(</span>fset 'display-startup-echo-area-message 'ignore<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;&#33756;&#21333;&#26639;&#12289;&#24037;&#20855;&#26639;&#12289;&#28378;&#21160;&#26465;&#27169;&#24335;&#65292;&#31105;&#27490;&#21551;&#21160;&#23631;&#24149;&#21644;&#25991;&#20214;&#23545;&#35805;&#26694;</span>
<span style="color: #4f97d7;">(</span>menu-bar-mode -1<span style="color: #4f97d7;">)</span>  
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span><span style="color: #bc6ec5;">(</span>functionp 'scroll-bar-mode<span style="color: #bc6ec5;">)</span>
    <span style="color: #bc6ec5;">(</span>scroll-bar-mode -1<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span><span style="color: #bc6ec5;">(</span>functionp 'toogle-menu-bar<span style="color: #bc6ec5;">)</span>
    <span style="color: #bc6ec5;">(</span>toogle-menu-bar -1<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span><span style="color: #bc6ec5;">(</span>functionp 'tool-bar-mode<span style="color: #bc6ec5;">)</span>
    <span style="color: #bc6ec5;">(</span>tool-bar-mode -1<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> inhibit-splash-screen t<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-file-dialog nil<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#36825;&#20010;&#38454;&#27573;&#19981;&#32534;&#35793;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> comp-deferred-compilation nil<span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> frame-title-format <span style="color: #2d9574;">"emacs@%b"</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;</span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#26631;&#39064;&#26639;&#26174;&#31034;buffer&#30340;&#21517;&#23383;&#65292;&#32780;&#19981;&#26159; emacs@wangyin.com &#36825;&#26679;&#27809;&#29992;&#30340;&#25552;&#31034;&#12290;</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">early-init</span><span style="color: #4f97d7;">)</span>
   <span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
   <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">early-init.el ends here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5665c81" class="outline-2">
<h2 id="org5665c81"><span class="section-number-2">3.</span> init.el</h2>
<div class="outline-text-2" id="text-3">
<p>
<code>init.el</code> 是Emacs的主要配置文件。
</p>
</div>

<div id="outline-container-org8359418" class="outline-3">
<h3 id="org8359418"><span class="section-number-3">3.1.</span> init.el 文件头</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init.el --- The main init entry for Emacs -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org733a773" class="outline-3">
<h3 id="org733a773"><span class="section-number-3">3.2.</span> package包管理配置</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">package</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> package-archives
      '<span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"melpa-cn"</span> . <span style="color: #2d9574;">"https://mirrors.ustc.edu.cn/elpa/melpa/"</span><span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"nongnu-cn"</span>   . <span style="color: #2d9574;">"https://mirrors.ustc.edu.cn/elpa/nongnu/"</span><span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"gnu-cn"</span>   . <span style="color: #2d9574;">"https://mirrors.ustc.edu.cn/elpa/gnu/"</span><span style="color: #2d9574;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("melpa"  . "https://melpa.org/packages/")</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("gnu"    . "https://elpa.gnu.org/packages/")</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("nongnu" . "https://elpa.nongnu.org/nongnu/")</span>
        <span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span>package-initialize<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org18f7e46" class="outline-3">
<h3 id="org18f7e46"><span class="section-number-3">3.3.</span> 安装use-package插件</h3>
<div class="outline-text-3" id="text-3-3">
<p>
<a href="https://github.com/jwiegley/use-package">use-package</a> 是一个让Emacs配置更加结构化更加清晰的一个宏插件。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; `</span><span style="color: #a45bad; background-color: #292e34;">use-package</span><span style="color: #2aa1ae; background-color: #292e34;">'</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">unless</span> <span style="color: #bc6ec5;">(</span>package-installed-p 'use-package<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>package-refresh-contents<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>package-install 'use-package<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; `</span><span style="color: #a45bad; background-color: #292e34;">use-package</span><span style="color: #2aa1ae; background-color: #292e34;">'</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">eval-and-compile</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-package-always-ensure nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-package-always-defer nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-package-expand-minimally nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-package-enable-imenu-support t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #2d9574;">(</span>daemonp<span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-package-always-demand t<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">eval-when-compile</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">use-package</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; `</span><span style="color: #a45bad; background-color: #292e34;">use-package</span><span style="color: #2aa1ae; background-color: #292e34;">' &#30340;&#38598;&#25104;&#27169;&#22359;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">use-package-ensure-system-package</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">diminish</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">bind-key</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5a6a70" class="outline-3">
<h3 id="orgf5a6a70"><span class="section-number-3">3.4.</span> quelpa包管理器</h3>
<div class="outline-text-3" id="text-3-4">
<p>
<a href="https://github.com/quelpa/quelpa">quelpa</a> 是配合 <code>package.el</code> 使用的，基于git的一个包管理器。
</p>

<p>
使用示例：
</p>
</div>

<div id="outline-container-org7464660" class="outline-4">
<h4 id="org7464660"><span class="section-number-4">3.4.1.</span> 示例1 常规操作</h4>
<div class="outline-text-4" id="text-3-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">org-super-links</span>
  <span style="color: #4f97d7;">:quelpa</span> <span style="color: #bc6ec5;">(</span>org-super-links <span style="color: #4f97d7;">:fetcher</span> github <span style="color: #4f97d7;">:repo</span> <span style="color: #2d9574;">"toshism/org-super-links"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> 
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9d09acb" class="outline-4">
<h4 id="org9d09acb"><span class="section-number-4">3.4.2.</span> 示例2 github访问不了，使用项目镜像链接</h4>
<div class="outline-text-4" id="text-3-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span>quelpa
 '<span style="color: #bc6ec5;">(</span>org-super-liks
   <span style="color: #4f97d7;">:fetcher</span> git
   <span style="color: #4f97d7;">:url</span> <span style="color: #2d9574;">"https://hub.nuaa.cf/toshism/org-super-links"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">org-super-links</span>
  <span style="color: #4f97d7;">:ensure</span> nil
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; `</span><span style="color: #a45bad; background-color: #292e34;">quelpa</span><span style="color: #2aa1ae; background-color: #292e34;">'</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">quelpa</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:commands</span> quelpa
  <span style="color: #4f97d7;">:config</span>  
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>quelpa-git-clone-depth 1<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>quelpa-update-melpa-p nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>quelpa-self-upgrade-p nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>quelpa-checkout-melpa-p nil<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">`</span><span style="color: #a45bad; background-color: #292e34;">quelpa</span><span style="color: #2aa1ae; background-color: #292e34;">' &#19982; `</span><span style="color: #a45bad; background-color: #292e34;">use-package</span><span style="color: #2aa1ae; background-color: #292e34;">' &#38598;&#25104;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">quelpa-use-package</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3e9fbd3" class="outline-3">
<h3 id="org3e9fbd3"><span class="section-number-3">3.5.</span> 加载模块化配置</h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23558;lisp&#30446;&#24405;&#25918;&#21040;&#21152;&#36733;&#36335;&#24452;&#30340;&#21069;&#38754;&#20197;&#21152;&#24555;&#21551;&#21160;&#36895;&#24230;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span>dir <span style="color: #67b11d;">(</span>locate-user-emacs-file <span style="color: #2d9574;">"lisp"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'load-path <span style="color: #2d9574;">(</span>file-name-as-directory dir<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21152;&#36733;&#21508;&#27169;&#22359;&#21270;&#37197;&#32622;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#35201;&#22312;`</span><span style="color: #a45bad; background-color: #292e34;">*message*</span><span style="color: #2aa1ae; background-color: #292e34;">'&#32531;&#20914;&#21306;&#26174;&#31034;&#21152;&#36733;&#27169;&#22359;&#21270;&#37197;&#32622;&#30340;&#20449;&#24687;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">with-temp-message</span> <span style="color: #2d9574;">""</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-base</span><span style="color: #bc6ec5;">)</span>                  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19968;&#20123;&#22522;&#26412;&#37197;&#32622;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-ui</span><span style="color: #bc6ec5;">)</span>                    <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">UI&#20132;&#20114;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-edit</span><span style="color: #bc6ec5;">)</span>                  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#32534;&#36753;&#34892;&#20026;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-completion</span><span style="color: #bc6ec5;">)</span>            <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#34917;&#20840;&#31995;&#32479;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-dired</span><span style="color: #bc6ec5;">)</span>                 <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#25991;&#20214;&#31649;&#29702;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-tools</span><span style="color: #bc6ec5;">)</span>                 <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#30456;&#20851;&#24037;&#20855;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-org</span><span style="color: #bc6ec5;">)</span>                   <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">org&#30456;&#20851;&#35774;&#32622;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-rss</span><span style="color: #bc6ec5;">)</span>                   <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">RSS&#37197;&#32622;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-shell</span><span style="color: #bc6ec5;">)</span>                 <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">Shell&#37197;&#32622;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">init-browser</span><span style="color: #bc6ec5;">)</span>               <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#27983;&#35272;&#22120;&#37197;&#32622;</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org76ebda9" class="outline-3">
<h3 id="org76ebda9"><span class="section-number-3">3.6.</span> init.el 文件尾</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init.el ends here</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb593e7a" class="outline-2">
<h2 id="orgb593e7a"><span class="section-number-2">4.</span> init-ui.el</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org4a944eb" class="outline-3">
<h3 id="org4a944eb"><span class="section-number-3">4.1.</span> init-ui.el 文件头</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-ui.el --- UI settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>
<div id="outline-container-org289b5d8" class="outline-3">
<h3 id="org289b5d8"><span class="section-number-3">4.2.</span> spacemacs-theme主题</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<a href="https://github.com/nashamri/spacemacs-theme">spacemacs-theme</a> 是我非常喜欢的一个主题包。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">spacemacs-theme</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span>load-theme 'spacemacs-dark t<span style="color: #bc6ec5;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">Dark theme</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(load-theme 'spacemacs-light t) ; Light theme</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf2906ff" class="outline-3">
<h3 id="orgf2906ff"><span class="section-number-3">4.3.</span> 其他UI零散设置项</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#29992;&#19968;&#20123;GUI&#29305;&#24615;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> use-dialog-box nil<span style="color: #4f97d7;">)</span>               <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#40736;&#26631;&#25805;&#20316;&#19981;&#20351;&#29992;&#23545;&#35805;&#26694;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> inhibit-default-init t<span style="color: #4f97d7;">)</span>           <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#21152;&#36733; `</span><span style="color: #a45bad; background-color: #292e34;">default</span><span style="color: #2aa1ae; background-color: #292e34;">' &#24211;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> inhibit-startup-screen t<span style="color: #4f97d7;">)</span>         <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#21152;&#36733;&#21551;&#21160;&#30011;&#38754;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> inhibit-startup-message t<span style="color: #4f97d7;">)</span>        <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#21152;&#36733;&#21551;&#21160;&#28040;&#24687;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> inhibit-startup-buffer-menu t<span style="color: #4f97d7;">)</span>    <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#26174;&#31034;&#32531;&#20914;&#21306;&#21015;&#34920;</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">;; &#33609;&#31295;&#32531;&#20914;&#21306;&#40664;&#35748;&#25991;&#23383;&#35774;&#32622;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(setq initial-scratch-message (concat ";; Happy hacking, "</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;                                       </span><span style="color: #2aa1ae; background-color: #292e34;">(capitalize user-login-name) " - Emacs &#9829; you!\n\n"))</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#32531;&#20914;&#21306;&#30340;&#25991;&#23383;&#26041;&#21521;&#20026;&#20174;&#24038;&#21040;&#21491;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> bidi-paragraph-direction 'left-to-right<span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;&#20351;&#29992;&#21452;&#21521;&#25324;&#21495;&#31639;&#27861;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(setq bidi-inhibit-bpa t)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#33258;&#21160;&#25240;&#34892;&#23485;&#24230;&#20026;80&#20010;&#23383;&#31526;&#65292;&#40664;&#35748;&#20540;&#20026;70</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-default</span> fill-column 80<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#22823;&#25991;&#20214;&#38408;&#20540;&#20026;100MB&#65292;&#40664;&#35748;10MB</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> large-file-warning-threshold 100000000<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">;; &#20197;16&#36827;&#21046;&#26174;&#31034;&#23383;&#33410;&#25968;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(setq display-raw-bytes-as-hex t)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26377;&#36755;&#20837;&#26102;&#31105;&#27490; `</span><span style="color: #a45bad; background-color: #292e34;">fontification</span><span style="color: #2aa1ae; background-color: #292e34;">' &#30456;&#20851;&#30340;&#20989;&#25968;&#38057;&#23376;&#65292;&#33021;&#35753;&#28378;&#21160;&#26356;&#39034;&#28369;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> redisplay-skip-fontification-on-input t<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;&#21709;&#38083;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> ring-bell-function 'ignore<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31105;&#27490;&#38378;&#28865;&#20809;&#26631;</span>
<span style="color: #4f97d7;">(</span>blink-cursor-mode -1<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#20809;&#26631;&#22788;&#32780;&#38750;&#40736;&#26631;&#25152;&#22312;&#20301;&#32622;&#31896;&#36148;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> mouse-yank-at-point t<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#25335;&#36125;&#31896;&#36148;&#35774;&#32622;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> select-enable-primary nil<span style="color: #4f97d7;">)</span>        <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#36873;&#25321;&#25991;&#23383;&#26102;&#19981;&#25335;&#36125;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> select-enable-clipboard t<span style="color: #4f97d7;">)</span>        <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#25335;&#36125;&#26102;&#20351;&#29992;&#21098;&#36148;&#26495;</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#40736;&#26631;&#28378;&#21160;&#35774;&#32622;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> scroll-step 2<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> scroll-margin 0<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> hscroll-step 2<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> hscroll-margin 2<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> scroll-conservatively 101<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> scroll-up-aggressively 0.01<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> scroll-down-aggressively 0.01<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> scroll-preserve-screen-position 'always<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23545;&#20110;&#39640;&#30340;&#34892;&#31105;&#27490;&#33258;&#21160;&#22402;&#30452;&#28378;&#21160;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> auto-window-vscroll nil<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#26032;&#20998;&#23631;&#25171;&#24320;&#30340;&#20301;&#32622;&#30340;&#38408;&#20540;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> split-width-threshold <span style="color: #bc6ec5;">(</span>assoc-default 'width default-frame-alist<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> split-height-threshold nil<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">TAB&#38190;&#35774;&#32622;&#65292;&#22312;Emacs&#37324;&#19981;&#20351;&#29992;TAB&#38190;&#65292;&#25152;&#26377;&#30340;TAB&#40664;&#35748;&#20026;4&#20010;&#31354;&#26684;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-default</span> indent-tabs-mode nil<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-default</span> tab-width 4<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">yes&#25110;no&#25552;&#31034;&#35774;&#32622;&#65292;&#36890;&#36807;&#19979;&#38754;&#36825;&#20010;&#20989;&#25968;&#35774;&#32622;&#24403;&#32531;&#20914;&#21306;&#21517;&#23383;&#21305;&#37197;&#21040;&#39044;&#35774;&#30340;&#23383;&#31526;&#20018;&#26102;&#33258;&#21160;&#22238;&#31572;yes</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> original-y-or-n-p 'y-or-n-p<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defalias</span> '<span style="color: #bc6ec5; font-weight: bold;">original-y-or-n-p</span> <span style="color: #bc6ec5;">(</span>symbol-function 'y-or-n-p<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">default-yes-sometimes</span> <span style="color: #bc6ec5;">(</span>prompt<span style="color: #bc6ec5;">)</span>
  <span style="color: #9f8766;">"automatically say y when buffer name match following string"</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">or</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"has a running process"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"does not exist; create"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"modified; kill anyway"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Delete buffer using"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Kill buffer of"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"still connected.  Kill it?"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Shutdown the client's kernel"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"kill them and exit anyway"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Revert buffer from file"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Kill Dired buffer of"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"delete buffer using"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Kill all pass entry"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"for all cursors"</span> prompt<span style="color: #67b11d;">)</span>
       <span style="color: #67b11d;">(</span>string-match <span style="color: #2d9574;">"Do you want edit the entry"</span> prompt<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
      t
    <span style="color: #2d9574;">(</span>original-y-or-n-p prompt<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defalias</span> '<span style="color: #bc6ec5; font-weight: bold;">yes-or-no-p</span> 'default-yes-sometimes<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defalias</span> '<span style="color: #bc6ec5; font-weight: bold;">y-or-n-p</span> 'default-yes-sometimes<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#21098;&#36148;&#26495;&#21382;&#21490;&#38271;&#24230;300&#65292;&#40664;&#35748;&#20026;60</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> kill-ring-max 200<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#21098;&#36148;&#26495;&#37324;&#19981;&#23384;&#20648;&#37325;&#22797;&#20869;&#23481;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> kill-do-not-save-duplicates t<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#20301;&#32622;&#35760;&#24405;&#38271;&#24230;&#20026;6&#65292;&#40664;&#35748;&#20026;16</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21487;&#20197;&#20351;&#29992; `</span><span style="color: #a45bad; background-color: #292e34;">counsel-mark-ring</span><span style="color: #2aa1ae; background-color: #292e34;">' or `</span><span style="color: #a45bad; background-color: #292e34;">consult-mark</span><span style="color: #2aa1ae; background-color: #292e34;">' (C-x j) &#26469;&#35775;&#38382;&#20809;&#26631;&#20301;&#32622;&#35760;&#24405;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20351;&#29992; C-x C-SPC &#25191;&#34892; `</span><span style="color: #a45bad; background-color: #292e34;">pop-global-mark</span><span style="color: #2aa1ae; background-color: #292e34;">' &#30452;&#25509;&#36339;&#36716;&#21040;&#19978;&#19968;&#20010;&#20840;&#23616;&#20301;&#32622;&#22788;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20351;&#29992; C-u C-SPC &#36339;&#36716;&#21040;&#26412;&#22320;&#20301;&#32622;&#22788;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> mark-ring-max 6<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> global-mark-ring-max 6<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622; emacs-lisp &#30340;&#38480;&#21046;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> max-lisp-eval-depth 10000<span style="color: #4f97d7;">)</span>        <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#40664;&#35748;&#20540;&#20026; 800</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> max-specpdl-size 10000<span style="color: #4f97d7;">)</span>           <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#40664;&#35748;&#20540;&#20026; 1600</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21551;&#29992; `</span><span style="color: #a45bad; background-color: #292e34;">list-timers</span><span style="color: #2aa1ae; background-color: #292e34;">', `</span><span style="color: #a45bad; background-color: #292e34;">list-threads</span><span style="color: #2aa1ae; background-color: #292e34;">' &#36825;&#20004;&#20010;&#21629;&#20196;</span>
<span style="color: #4f97d7;">(</span>put 'list-timers 'disabled nil<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span>put 'list-threads 'disabled nil<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#21629;&#20196;&#34892;&#37324;&#25903;&#25345;&#40736;&#26631;</span>
<span style="color: #4f97d7;">(</span>xterm-mouse-mode 1<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#36864;&#20986;Emacs&#26102;&#36827;&#34892;&#30830;&#35748;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> confirm-kill-emacs 'y-or-n-p<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#27169;&#24335;&#26639;&#19978;&#26174;&#31034;&#24403;&#21069;&#20809;&#26631;&#30340;&#21015;&#21495;</span>
<span style="color: #4f97d7;">(</span>column-number-mode t<span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span>add-hook 'org-mode-hook <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #2d9574;">()</span> <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> truncate-lines nil<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;</span><span style="color: #2aa1ae; background-color: #292e34;">&#33258;&#21160;&#25442;&#34892;(&#25240;&#34892;)</span>

<span style="color: #4f97d7;">(</span>global-linum-mode t<span style="color: #4f97d7;">)</span>                   <span style="color: #2aa1ae; background-color: #292e34;">;</span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#34892;&#21495;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcfa9465" class="outline-3">
<h3 id="orgcfa9465"><span class="section-number-3">4.4.</span> 编码设置</h3>
<div class="outline-text-3" id="text-4-4">
<p>
统一使用 UTF-8 编码。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622;&#32534;&#30721;</span>
<span style="color: #4f97d7;">(</span>prefer-coding-system 'utf-8<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-default</span> buffer-file-coding-system 'utf-8<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org612cdf9" class="outline-3">
<h3 id="org612cdf9"><span class="section-number-3">4.5.</span> keycast按键展示</h3>
<div class="outline-text-3" id="text-4-5">
<p>
<a href="https://github.com/tarsius/keycast">keycast mode</a> 插件可以在模式栏上展示所有的按键，以及对应的函数。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">keycast</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . keycast-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">:custom-face</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(keycast-key ((t (:background "#0030b4" :weight bold))))</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(keycast-command ((t (:foreground "#0030b4" :weight bold))))</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">set for doom-modeline support</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">With the latest change 72d9add, mode-line-keycast needs to be modified to keycast-mode-line.</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">define-minor-mode</span> <span style="color: #bc6ec5; font-weight: bold;">keycast-mode</span>
    <span style="color: #9f8766;">"Show current command and its key binding in the mode line (fix for use with doom-mode-line)."</span>
    <span style="color: #4f97d7;">:global</span> t
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> keycast-mode
        <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">progn</span>
          <span style="color: #b1951d;">(</span>add-hook 'pre-command-hook 'keycast--update t<span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span>add-to-list 'global-mode-string '<span style="color: #4f97d7;">(</span><span style="color: #2d9574;">""</span> keycast-mode-line <span style="color: #2d9574;">"  "</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>remove-hook 'pre-command-hook 'keycast--update<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> global-mode-string <span style="color: #b1951d;">(</span>delete '<span style="color: #4f97d7;">(</span><span style="color: #2d9574;">""</span> keycast-mode-line <span style="color: #2d9574;">"  "</span><span style="color: #4f97d7;">)</span> global-mode-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">dolist</span> <span style="color: #2d9574;">(</span>input '<span style="color: #67b11d;">(</span>self-insert-command
                   org-self-insert-command<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>add-to-list 'keycast-substitute-alist `<span style="color: #67b11d;">(</span>,input <span style="color: #2d9574;">"."</span> <span style="color: #2d9574;">"Typing&#8230;"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">dolist</span> <span style="color: #2d9574;">(</span>event '<span style="color: #67b11d;">(</span>mouse-event-p
                   mouse-movement-p
                   mwheel-scroll<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>add-to-list 'keycast-substitute-alist `<span style="color: #67b11d;">(</span>,event nil<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> keycast-log-format <span style="color: #2d9574;">"%-20K%C\n"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> keycast-log-frame-alist
        '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>minibuffer . nil<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> keycast-log-newest-first t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org09ec579" class="outline-3">
<h3 id="org09ec579"><span class="section-number-3">4.6.</span> shackle窗口管理</h3>
<div class="outline-text-3" id="text-4-6">
<p>
<a href="https://depp.brause.cc/shackle/">shackle</a> 插件能自定义窗口的弹出方式。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">shackle</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . shackle-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> shackle-lighter <span style="color: #2d9574;">""</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> shackle-select-reused-windows nil<span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">default nil</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> shackle-default-alignment 'below<span style="color: #bc6ec5;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">default below</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> shackle-default-size 0.4<span style="color: #bc6ec5;">)</span>          <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">default 0.5</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> shackle-rules
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">CONDITION(:regexp)            :select     :inhibit-window-quit   :size+:align|:other     :same|:popup</span>
        '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>compilation-mode              <span style="color: #4f97d7;">:ignore</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\*Async Shell.*\\*"</span> <span style="color: #4f97d7;">:regexp</span> t <span style="color: #4f97d7;">:ignore</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\*corfu.*\\*"</span>       <span style="color: #4f97d7;">:regexp</span> t <span style="color: #4f97d7;">:ignore</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"*eshell*"</span>                    <span style="color: #4f97d7;">:select</span> t                          <span style="color: #4f97d7;">:size</span> 0.4  <span style="color: #4f97d7;">:align</span> t     <span style="color: #4f97d7;">:popup</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span>helpful-mode                  <span style="color: #4f97d7;">:select</span> t                          <span style="color: #4f97d7;">:size</span> 0.6  <span style="color: #4f97d7;">:align</span> right <span style="color: #4f97d7;">:popup</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"*Messages*"</span>                  <span style="color: #4f97d7;">:select</span> t                          <span style="color: #4f97d7;">:size</span> 0.4  <span style="color: #4f97d7;">:align</span> t     <span style="color: #4f97d7;">:popup</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"*Calendar*"</span>                  <span style="color: #4f97d7;">:select</span> t                          <span style="color: #4f97d7;">:size</span> 0.3  <span style="color: #4f97d7;">:align</span> t     <span style="color: #4f97d7;">:popup</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"*info*"</span>                      <span style="color: #4f97d7;">:select</span> t                                                  <span style="color: #4f97d7;">:same</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span>magit-status-mode             <span style="color: #4f97d7;">:select</span> t   <span style="color: #4f97d7;">:inhibit-window-quit</span> t                         <span style="color: #4f97d7;">:same</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span>magit-log-mode                <span style="color: #4f97d7;">:select</span> t   <span style="color: #4f97d7;">:inhibit-window-quit</span> t                         <span style="color: #4f97d7;">:same</span> t<span style="color: #67b11d;">)</span>
          <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd063ea6" class="outline-3">
<h3 id="orgd063ea6"><span class="section-number-3">4.7.</span> popper窗口弹出管理</h3>
<div class="outline-text-3" id="text-4-7">
<p>
我们通过 <a href="https://hub.nuaa.cf/karthink/popper">popper</a> 插件，来控制窗口的弹出行为，与 <a href="https://depp.brause.cc/shackle/">shackle</a> 一起配合使用。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">popper</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-`"</span>     . popper-toggle-latest<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-&lt;tab&gt;"</span> . popper-cycle<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-\\"</span>    . popper-toggle-type<span style="color: #2d9574;">)</span>
         <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> popper-reference-buffers
        '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\*Messages\\*"</span>
          <span style="color: #2d9574;">"\\*Async Shell Command\\*"</span>
          help-mode
          helpful-mode
          occur-mode
          pass-view-mode
          <span style="color: #2d9574;">"^\\*eshell.*\\*$"</span> eshell-mode <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">eshell as a popup</span>
          <span style="color: #2d9574;">"^\\*shell.*\\*$"</span>  shell-mode  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">shell as a popup</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\*corfu\\*"</span> . hide<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span>compilation-mode . hide<span style="color: #67b11d;">)</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">derived from `</span><span style="color: #a45bad; background-color: #292e34;">fundamental-mode</span><span style="color: #2aa1ae; background-color: #292e34;">' and fewer than 10 lines will be considered a popup</span>
          <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #b1951d;">(</span>buf<span style="color: #b1951d;">)</span> <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">with-current-buffer</span> buf
                          <span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">and</span> <span style="color: #bc6ec5;">(</span>derived-mode-p 'fundamental-mode<span style="color: #bc6ec5;">)</span>
                               <span style="color: #bc6ec5;">(</span>&lt; <span style="color: #2d9574;">(</span>count-lines <span style="color: #9cb6ad;">(</span>point-min<span style="color: #9cb6ad;">)</span> <span style="color: #9cb6ad;">(</span>point-max<span style="color: #9cb6ad;">)</span><span style="color: #2d9574;">)</span>
                                  10<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #2d9574;">)</span>
        <span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>popper-mode +1<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>popper-echo-mode +1<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">group by project.el, projectile, directory or perspective</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> popper-group-function nil<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">pop in child frame or not</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> popper-display-function #'display-buffer-in-child-frame<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">use `</span><span style="color: #a45bad; background-color: #292e34;">shackle.el</span><span style="color: #2aa1ae; background-color: #292e34;">' to control popup</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> popper-display-control nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb73c510" class="outline-3">
<h3 id="orgb73c510"><span class="section-number-3">4.8.</span> winner窗口管理</h3>
<div class="outline-text-3" id="text-4-8">
<p>
内置的 <code>winner</code> 插件是一个窗口管理器，可以通过 <code>winner-undo</code> 和 <code>winner-redo</code> 命令恢复或重做窗口布局。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">winner</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . winner-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:commands</span> <span style="color: #bc6ec5;">(</span>winner-undo winner-redo<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> winner-boring-buffers
        '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"*Completions*"</span>
          <span style="color: #2d9574;">"*Compile-Log*"</span>
          <span style="color: #2d9574;">"*inferior-lisp*"</span>
          <span style="color: #2d9574;">"*Fuzzy Completions*"</span>
          <span style="color: #2d9574;">"*Apropos*"</span>
          <span style="color: #2d9574;">"*Help*"</span>
          <span style="color: #2d9574;">"*cvs*"</span>
          <span style="color: #2d9574;">"*Buffer List*"</span>
          <span style="color: #2d9574;">"*Ibuffer*"</span>
          <span style="color: #2d9574;">"*esh command on file*"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org53a9d2b" class="outline-3">
<h3 id="org53a9d2b"><span class="section-number-3">4.9.</span> init-ui.el 文件尾</h3>
<div class="outline-text-3" id="text-4-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-ui</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-ui.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5dc2837" class="outline-2">
<h2 id="org5dc2837"><span class="section-number-2">5.</span> init-base.el</h2>
<div class="outline-text-2" id="text-5">
</div>

<div id="outline-container-orge30552d" class="outline-3">
<h3 id="orge30552d"><span class="section-number-3">5.1.</span> init-base.el 文件头</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-base.el --- Basical settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org38448ab" class="outline-3">
<h3 id="org38448ab"><span class="section-number-3">5.2.</span> savehist记住迷你缓冲区历史</h3>
<div class="outline-text-3" id="text-5-2">
<p>
记住迷你缓冲区历史。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">savehist</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . savehist-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Allow commands in minibuffers, will affect `</span><span style="color: #a45bad; background-color: #292e34;">dired-do-dired-do-find-regexp-and-replace</span><span style="color: #2aa1ae; background-color: #292e34;">' command:</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> enable-recursive-minibuffers t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> history-length 1000<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> savehist-additional-variables '<span style="color: #2d9574;">(</span>mark-ring
                                        global-mark-ring
                                        search-ring
                                        regexp-search-ring
                                        extended-command-history<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> savehist-autosave-interval 300<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1a56ff5" class="outline-3">
<h3 id="org1a56ff5"><span class="section-number-3">5.3.</span> saveplace记住每个文件的光标位置</h3>
<div class="outline-text-3" id="text-5-3">
<p>
自动记住每个文件的最后一次访问的光标位置。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">saveplace</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . save-place-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5208bc" class="outline-3">
<h3 id="orgf5208bc"><span class="section-number-3">5.4.</span> undo-tree撤销设置</h3>
<div class="outline-text-3" id="text-5-4">
<p>
<a href="https://www.dr-qubit.org/undo-tree.html">undo-tree</a> 插件可以提供一个可视化的撤销、重做系统，我们使用 <code>C-/</code> 来撤销，使用 <code>M-_</code> 来重做。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">undo-tree</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . global-undo-tree-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">don't save undo history to local files</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> undo-tree-auto-save-history nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga95b851" class="outline-3">
<h3 id="orga95b851"><span class="section-number-3">5.5.</span> super-save自动保存</h3>
<div class="outline-text-3" id="text-5-5">
<p>
<a href="https://hub.nuaa.cf/bbatsov/super-save">super-save</a> 插件能自动保存缓冲区。它可以设置在某些行为（如窗口切换、或窗口空闲一段时间）下自动保存。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">super-save</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . super-save-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Emacs&#31354;&#38386;&#26159;&#21542;&#33258;&#21160;&#20445;&#23384;&#65292;&#36825;&#37324;&#19981;&#35774;&#32622;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> super-save-auto-save-when-idle nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20999;&#25442;&#31383;&#21475;&#33258;&#21160;&#20445;&#23384;</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'super-save-triggers 'other-window<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#25214;&#25991;&#20214;&#26102;&#33258;&#21160;&#20445;&#23384;</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'super-save-hook-triggers 'find-file-hook<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#36828;&#31243;&#25991;&#20214;&#32534;&#36753;&#19981;&#33258;&#21160;&#20445;&#23384;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> super-save-remote-files nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#29305;&#23450;&#21518;&#32512;&#21517;&#30340;&#25991;&#20214;&#19981;&#33258;&#21160;&#20445;&#23384;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> super-save-exclude '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">".gpg"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#33258;&#21160;&#20445;&#23384;&#26102;&#65292;&#20445;&#23384;&#25152;&#26377;&#32531;&#20914;&#21306;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">super-save/save-all-buffers</span> <span style="color: #2d9574;">()</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">save-excursion</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">dolist</span> <span style="color: #b1951d;">(</span>buf <span style="color: #4f97d7;">(</span>buffer-list<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>set-buffer buf<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">when</span> <span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">and</span> buffer-file-name
                   <span style="color: #bc6ec5;">(</span>buffer-modified-p <span style="color: #2d9574;">(</span>current-buffer<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
                   <span style="color: #bc6ec5;">(</span>file-writable-p buffer-file-name<span style="color: #bc6ec5;">)</span>
                   <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #2d9574;">(</span>file-remote-p buffer-file-name<span style="color: #2d9574;">)</span> super-save-remote-files t<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
          <span style="color: #4f97d7;">(</span>save-buffer<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>advice-add 'super-save-command <span style="color: #4f97d7;">:override</span> 'super-save/save-all-buffers<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org06f3990" class="outline-3">
<h3 id="org06f3990"><span class="section-number-3">5.6.</span> init-base.el 文件尾</h3>
<div class="outline-text-3" id="text-5-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-base</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-base.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdf3f370" class="outline-2">
<h2 id="orgdf3f370"><span class="section-number-2">6.</span> init-edit.el</h2>
<div class="outline-text-2" id="text-6">
</div>

<div id="outline-container-orge3d62f4" class="outline-3">
<h3 id="orge3d62f4"><span class="section-number-3">6.1.</span> init-edit.el 文件头</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-edit.el --- Editing settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orgc33f10a" class="outline-3">
<h3 id="orgc33f10a"><span class="section-number-3">6.2.</span> Emacs备份设置</h3>
<div class="outline-text-3" id="text-6-2">
<p>
不使用Emacs的自动备份设置。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> make-backup-files nil<span style="color: #4f97d7;">)</span>                                  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#33258;&#21160;&#22791;&#20221;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> auto-save-default nil<span style="color: #4f97d7;">)</span>                                  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#20351;&#29992;Emacs&#33258;&#24102;&#30340;&#33258;&#21160;&#20445;&#23384;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8818fd9" class="outline-3">
<h3 id="org8818fd9"><span class="section-number-3">6.3.</span> 解除一些不常用的快捷键</h3>
<div class="outline-text-3" id="text-6-3">
<p>
将一些不常用的快捷键解除，防止误操作。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35299;&#38500;&#19981;&#24120;&#29992;&#30340;&#24555;&#25463;&#38190;&#23450;&#20041;</span>
<span style="color: #4f97d7;">(</span>global-set-key <span style="color: #bc6ec5;">(</span>kbd <span style="color: #2d9574;">"s-q"</span><span style="color: #bc6ec5;">)</span> nil<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span>global-set-key <span style="color: #bc6ec5;">(</span>kbd <span style="color: #2d9574;">"M-z"</span><span style="color: #bc6ec5;">)</span> nil<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span>global-set-key <span style="color: #bc6ec5;">(</span>kbd <span style="color: #2d9574;">"M-m"</span><span style="color: #bc6ec5;">)</span> nil<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span>global-set-key <span style="color: #bc6ec5;">(</span>kbd <span style="color: #2d9574;">"C-x C-z"</span><span style="color: #bc6ec5;">)</span> nil<span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">(</span>global-set-key <span style="color: #bc6ec5;">[</span>mouse-2<span style="color: #bc6ec5;">]</span> nil<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org21284b5" class="outline-3">
<h3 id="org21284b5"><span class="section-number-3">6.4.</span> delsel选择文本输入时直接替换</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Emacs默认选择文本后直接输入，是不会直接删除所选择的文本进行替换的。通过内置的 <code>delsel</code> 插件来实现这个行为。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Directly modify when selecting text</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">delsel</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . delete-selection-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5e5a23" class="outline-3">
<h3 id="orge5e5a23"><span class="section-number-3">6.5.</span> 自动重载设置</h3>
<div class="outline-text-3" id="text-6-5">
<p>
当我们的文件发生了改变后，我们希望Emacs里打开的永远是最新的文件，这个时候，我们需要对自动重载进行设置，让我们的Emacs在文件发生改变的时候自动重载文件。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">autorevert</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . global-auto-revert-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">:bind ("s-u" . revert-buffer)</span>
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>auto-revert-interval 10<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>auto-revert-avoid-polling t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>auto-revert-verbose nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>auto-revert-remote-files t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>auto-revert-check-vc-info t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>global-auto-revert-non-file-buffers t<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae9f4ee" class="outline-3">
<h3 id="orgae9f4ee"><span class="section-number-3">6.6.</span> avy光标移动</h3>
<div class="outline-text-3" id="text-6-6">
<p>
<a href="https://github.com/abo-abo/avy">avy</a> 是一个光标移动插件，能快速将光标移动到屏幕上的任意字符，非常强大！
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">avy</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:bind</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-j"</span> . avy-goto-char-timer<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org83a59b8" class="outline-3">
<h3 id="org83a59b8"><span class="section-number-3">6.7.</span> amx 记录命令历史</h3>
<div class="outline-text-3" id="text-6-7">
<p>
<a href="https://github.com/DarwinAwardWinner/amx">amx - GitHub 主页</a>
</p>

<p>
这个插件可以记录我们每次调用 M-x 时输入的命令历史，然后每次将最常用的显示在前面，这对于我们短时间希望频繁输入某几个命令的场景非常有用。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">amx</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>amx-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8ca349" class="outline-3">
<h3 id="orgc8ca349"><span class="section-number-3">6.8.</span> window-numbering 快捷键切换窗口</h3>
<div class="outline-text-3" id="text-6-8">
<p>
分屏之后的emacs在屏幕切换的时候会比较麻烦，针对这个功能有一个可以实现这个的插件，也就是window-numbering。
</p>

<p>
使用方法：&lt;M-number&gt;
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">window-numbering</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">:defer 3</span>
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>window-numbering-mode t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ca2f45" class="outline-3">
<h3 id="org8ca2f45"><span class="section-number-3">6.9.</span> mwim 优化光标移动到行首/行尾</h3>
<div class="outline-text-3" id="text-6-9">
<p>
<a href="https://github.com/alezost/mwim.el">mwim - GitHub 主页</a>
</p>

<p>
C-a 对应了 move-beginning-of-line，M-m 对应了 back-to-indentation。当代码有缩进时，前者会把光标移动到行首（到空格之前），后者会移动到代码文字的开头（到空格之后）。那么实际中这两个按法差别较大，且不易区分，使用起来不方便。mwim 就将二者合并，覆盖 C-a 为 mwim-beginning-of-code-or-line，这样按一次 C-a 时移动到代码文字开头，再按一次则是移动到整行的行首，如此反复。
</p>

<p>
同时，更有意义的是，它还可以覆盖 C-e move-end-of-line 为 mwim-end-of-code-or-line，当本行代码结尾有注释时，第一次按 C-e 将光标移动到代码尾部、注释之前。再按一次则是移动到整行的行尾。 这就大大提高了写代码的效率。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">mwim</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:bind</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">"C-a"</span> . mwim-beginning-of-code-or-line<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">"C-e"</span> . mwim-end-of-code-or-line<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org014a1bc" class="outline-3">
<h3 id="org014a1bc"><span class="section-number-3">6.10.</span> dashboard 配置欢迎页面</h3>
<div class="outline-text-3" id="text-6-10">
<p>
<a href="https://github.com/emacs-dashboard/emacs-dashboard">dashboard - GitHub 主页</a>
</p>

<p>
起初每当我们打开 Emacs 都有一个欢迎界面，显示了一些 Emacs 的帮助信息。这对刚入门而言比较方便，但当我们熟练后这个页面就逐渐无用了。dashboard 就是一个新的欢迎界面，可以列出最近打开的项目、最近打开的文件等等。按下 p 或 r 就可以快速 跳转到相应小结里。还可以列出来标记过的书签、org-mode （Emacs 自带的一个强大的笔记系统）日程、自定义控件等。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">dashboard</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(setq dashboard-banner-logo-title "Welcome to Emacs!") ;; &#20010;&#24615;&#31614;&#21517;&#65292;&#38543;&#35835;&#32773;&#21916;&#22909;&#35774;&#32622;</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(setq dashboard-projects-backend 'projectile) ;; &#35835;&#32773;&#21487;&#20197;&#26242;&#26102;&#27880;&#37322;&#25481;&#36825;&#19968;&#34892;&#65292;&#31561;&#23433;&#35013;&#20102; projectile &#21518;&#20877;&#20351;&#29992;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> dashboard-startup-banner 'official<span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20063;&#21487;&#20197;&#33258;&#23450;&#20041;&#22270;&#29255;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> dashboard-items '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>recents  . 10<span style="color: #67b11d;">)</span>   <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#22810;&#23569;&#20010;&#26368;&#36817;&#25991;&#20214;</span>
                          <span style="color: #67b11d;">(</span>bookmarks . 10<span style="color: #67b11d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#22810;&#23569;&#20010;&#26368;&#36817;&#20070;&#31614;</span>
                          <span style="color: #67b11d;">(</span>projects . 10<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#22810;&#23569;&#20010;&#26368;&#36817;&#39033;&#30446;</span>
  <span style="color: #bc6ec5;">(</span>dashboard-setup-startup-hook<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
<div id="outline-container-orga19773c" class="outline-4">
<h4 id="orga19773c"><span class="section-number-4">6.10.1.</span> projectile</h4>
<div class="outline-text-4" id="text-6-10-1">
<p>
配合dashboard使用
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">projectile</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3e1c86f" class="outline-3">
<h3 id="org3e1c86f"><span class="section-number-3">6.11.</span> marginalia 为 Emacs minibuffer 中的选项添加注解</h3>
<div class="outline-text-3" id="text-6-11">
<p>
<a href="https://github.com/minad/marginalia">marginalia - GitHub 主页</a>
</p>

<p>
一个为 Emacs minibuffer 中的选项添加注解的插件。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">marginalia</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>marginalia-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7;">:map</span> minibuffer-local-map
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-A"</span> . marginalia-cycle<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbbae752" class="outline-3">
<h3 id="orgbbae752"><span class="section-number-3">6.12.</span> which-key 根据快捷键前缀提示快捷键</h3>
<div class="outline-text-3" id="text-6-12">
<p>
<a href="https://github.com/justbur/emacs-which-key">which-key - GitHub 主页</a>
</p>

<p>
当按下部分快捷键前缀时，它会通过 minibuffer 提示你都有哪些可以按的快捷键及其命令名。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">which-key</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>which-key-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge7735ec" class="outline-3">
<h3 id="orge7735ec"><span class="section-number-3">6.13.</span> hydra 把一组特定场景的命令组织到一起， 通过简单按键来进行调用</h3>
<div class="outline-text-3" id="text-6-13">
<p>
<a href="https://github.com/abo-abo/hydra">hydra - GitHub 主页</a>
</p>

<p>
hydra 主要功能是把一组特定场景的命令组织到一起， 通过简单按键来进行调用。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">hydra</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org59efc86" class="outline-4">
<h4 id="org59efc86"><span class="section-number-4">6.13.1.</span> use-package-hydra</h4>
<div class="outline-text-4" id="text-6-13-1">
<p>
配合hydra使用
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">use-package-hydra</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:after</span> hydra<span style="color: #4f97d7;">)</span> 
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org77af2a1" class="outline-3">
<h3 id="org77af2a1"><span class="section-number-3">6.14.</span> multiple-cursors多光标编辑</h3>
<div class="outline-text-3" id="text-6-14">
<p>
<a href="https://hub.nuaa.cf/magnars/multiple-cursors.el">multiple-cursors</a> 插件能让Emacs实现多光标编辑和移动。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">multiple-cursors</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:after</span> hydra
  <span style="color: #4f97d7;">:bind</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-x M-h m"</span> . hydra-multiple-cursors/body<span style="color: #2d9574;">)</span>
   <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-M-&lt;mouse-1&gt;"</span> . mc/toggle-cursor-on-click<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:hydra</span> <span style="color: #bc6ec5;">(</span>hydra-multiple-cursors
          <span style="color: #2d9574;">(</span><span style="color: #4f97d7;">:hint</span> nil<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">"</span>
<span style="color: #2d9574;">Up^^             Down^^           Miscellaneous           % 2(mc/num-cursors) cursor%s(if (&gt; (mc/num-cursors) 1) \"s\" \"\")</span>
<span style="color: #2d9574;">------------------------------------------------------------------</span>
<span style="color: #2d9574;"> [_p_]   Prev     [_n_]   Next     [_l_] Edit lines  [_0_] Insert numbers</span>
<span style="color: #2d9574;"> [_P_]   Skip     [_N_]   Skip     [_a_] Mark all    [_A_] Insert letters</span>
<span style="color: #2d9574;"> [_M-p_] Unmark   [_M-n_] Unmark   [_s_] Search      [_q_] Quit</span>
<span style="color: #2d9574;"> [_|_] Align with input CHAR       [Click] Cursor at point"</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"l"</span> mc/edit-lines <span style="color: #4f97d7;">:exit</span> t<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"a"</span> mc/mark-all-like-this <span style="color: #4f97d7;">:exit</span> t<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"n"</span> mc/mark-next-like-this<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"N"</span> mc/skip-to-next-like-this<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-n"</span> mc/unmark-next-like-this<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"p"</span> mc/mark-previous-like-this<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"P"</span> mc/skip-to-previous-like-this<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-p"</span> mc/unmark-previous-like-this<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"|"</span> mc/vertical-align<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"s"</span> mc/mark-all-in-region-regexp <span style="color: #4f97d7;">:exit</span> t<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"0"</span> mc/insert-numbers <span style="color: #4f97d7;">:exit</span> t<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"A"</span> mc/insert-letters <span style="color: #4f97d7;">:exit</span> t<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"&lt;mouse-1&gt;"</span> mc/add-cursor-on-click<span style="color: #2d9574;">)</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Help with click recognition in this hydra</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"&lt;down-mouse-1&gt;"</span> ignore<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"&lt;drag-mouse-1&gt;"</span> ignore<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"q"</span> nil<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a4007f" class="outline-3">
<h3 id="org9a4007f"><span class="section-number-3">6.15.</span> highlight-symbol 高亮出当前 Buffer 中所有的、与光标所在处的符号相同的符号</h3>
<div class="outline-text-3" id="text-6-15">
<p>
<a href="https://github.com/nschum/highlight-symbol.el">highlight-symbol - GitHub 主页</a>
</p>

<p>
这个插件可以高亮出当前 Buffer 中所有的、与光标所在处的符号相同的符号。也就是例如一些同名变量、函数名等。虽然在后面我们使用一些其他插件时也会捎带有类似功能，但它可以同时高亮很多字符，便于阅读代码等。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">highlight-symbol</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>highlight-symbol-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">"&lt;f10&gt;"</span> . highlight-symbol<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#25353;&#19979; F10 &#38190;&#23601;&#21487;&#39640;&#20142;&#24403;&#21069;&#31526;&#21495;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc40da45" class="outline-3">
<h3 id="orgc40da45"><span class="section-number-3">6.16.</span> rainbow-delimiters 用不同颜色标记多级括号，方便看清代码块</h3>
<div class="outline-text-3" id="text-6-16">
<p>
<a href="https://github.com/Fanael/rainbow-delimiters">rainbow-delimiters - GitHub 主页</a>
</p>

<p>
这个插件可以用不同颜色标记多级括号，方便看清代码块（尤其在 EmacsLisp 中）。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">rainbow-delimiters</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>prog-mode . rainbow-delimiters-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf2a1509" class="outline-3">
<h3 id="orgf2a1509"><span class="section-number-3">6.17.</span> evil（为 Vim 用户）</h3>
<div class="outline-text-3" id="text-6-17">
<p>
<a href="https://github.com/emacs-evil/evil">evil - GitHub 主页</a>
</p>

<p>
evil 可以让习惯了 Vim 的用户在 Emacs 中使用 Vim 按键方式，大大减轻了 Vim 用户转入 Emacs 的成本。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">evil</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">:init (evil-mode)</span>
  <span style="color: #4f97d7;">:bind</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-x C-z"</span> . evil-mode<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e72828" class="outline-3">
<h3 id="org1e72828"><span class="section-number-3">6.18.</span> WorkLogReport 工作日志报告</h3>
<div class="outline-text-3" id="text-6-18">
<p>
插入工作日志报告模板
</p>

<p>
为什么%s会被替换为时间戳而不是其他内容被替换为时间戳，原理是什么
这是因为在 Emacs Lisp 中，`format` 函数的工作方式类似于 C 语言中的 `printf` 函数。`format` 函数接受一个格式字符串和一系列参数，然后根据格式字符串中的格式指定符（如 `%s`、`%d` 等）将后续的参数插入到格式字符串中。
</p>

<p>
在你的代码中，`format` 函数的格式字符串是：
</p>

<p>
```lisp
"<b>*</b> %s
,#+BEGIN_SRC emacs-lisp :tangle %s.txt
%s: name\n1、
,#+END_SRC"
```
</p>

<p>
这个字符串中有三个 `%s`，所以 `format` 函数需要三个额外的参数。在你的代码中，这三个参数都是 `block-name`，即你处理过的时间戳。
</p>

<p>
所以，当 `format` 函数运行时，它会依次取出 `block-name`，并将其插入到格式字符串中的 `%s` 的位置。这就是为什么 `%s` 会被替换为时间戳的原理。
</p>

<p>
如果你希望将不同的内容插入到格式字符串中，你只需提供不同的参数即可。例如：
</p>

<p>
```lisp
(format "Hello, %s! Today is %s." "Alice" "Monday")
```
</p>

<p>
这段代码会返回字符串 "Hello, Alice! Today is Monday."。
,******************************************************************************
这句有什么用：(block-name (concat clean-time))  ; 构建代码块名
这一句 `(block-name (concat clean-time))` 的作用是创建一个新的变量 `block-name`，并将其设置为 `clean-time` 的值。
</p>

<p>
在这个上下文中，`clean-time` 是一个已经去除了破折号和冒号的时间字符串。`concat` 函数通常用于连接多个字符串，但在这里，它只有一个参数 `clean-time`，所以它实际上只是返回 `clean-time` 的值。
</p>

<p>
因此，这一句的效果就是创建了一个新的变量 `block-name`，并将其设置为与 `clean-time` 相同的值。后面的代码中使用 `block-name` 作为代码块的名字。
</p>

<p>
如果你的代码中没有需要使用不同的名称来表示清理过的时间戳，那么这一行代码实际上是不必要的，你可以直接使用 `clean-time`。但是，如果你打算在后续的代码中修改 `block-name` 或 `clean-time` 的值，那么这一行代码就很有用了，因为它确保了 `block-name` 和 `clean-time` 是两个独立的变量，修改一个不会影响另一个。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">add-code-block</span> <span style="color: #bc6ec5;">()</span>
  <span style="color: #9f8766;">"&#22312;&#24403;&#21069;&#20301;&#32622;&#28155;&#21152;&#19968;&#20010;&#20195;&#30721;&#22359;&#65292;&#24182;&#20197;&#26102;&#38388;&#20316;&#20026;&#22359;&#21517;&#36827;&#34892;&#21629;&#21517;"</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>time <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m-%d"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#33719;&#21462;&#24403;&#21069;&#26102;&#38388;</span>
         <span style="color: #67b11d;">(</span>clean-time <span style="color: #b1951d;">(</span>replace-regexp-in-string <span style="color: #2d9574;">"[-:]"</span> <span style="color: #2d9574;">""</span> time<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21435;&#38500;&#26102;&#38388;&#20013;&#30340;&#30772;&#25240;&#21495;&#21644;&#20882;&#21495;</span>
         <span style="color: #67b11d;">(</span>block-name <span style="color: #b1951d;">(</span>concat clean-time<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26500;&#24314;&#20195;&#30721;&#22359;&#21517;</span>
         <span style="color: #67b11d;">(</span>code-block <span style="color: #b1951d;">(</span>format
                      <span style="color: #2d9574;">"*** %s</span>
<span style="color: #2d9574;">#+BEGIN_SRC emacs-lisp :tangle %s.txt</span>
<span style="color: #2d9574;">%s: name\n1&#12289;</span>
<span style="color: #2d9574;">#+END_SRC"</span>
                      block-name clean-time block-name<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>insert code-block<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;&#24403;&#21069;&#20301;&#32622;&#25554;&#20837;&#20195;&#30721;&#22359;</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#24555;&#25463;&#38190; C-c b &#32465;&#23450;&#21040; add-code-block &#20989;&#25968;</span>
<span style="color: #4f97d7;">(</span>global-set-key <span style="color: #bc6ec5;">(</span>kbd <span style="color: #2d9574;">"C-c SPC r"</span><span style="color: #bc6ec5;">)</span> 'add-code-block<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8541325" class="outline-3">
<h3 id="org8541325"><span class="section-number-3">6.19.</span> g-org-insert-note-header 插入一些 Org 模式的头部信息</h3>
<div class="outline-text-3" id="text-6-19">
<p>
用于在当前光标位置插入一些 Org 模式的头部信息。这些头部信息包括了一些选项，标题，作者以及一些其他设置
</p>

<ul class="org-ul">
<li>#+TITLE: \n：设置文档的标题</li>
<li>#+AUTHOR: yenao：将文档的作者设置为 "yenao"。</li>
<li>#+OPTIONS: toc:t num:3 H:10 ^:nil pri:t：设置导出选项，包括生成目录、章节编号深度、标题级别、上标和优先级。</li>
<li>#+STARTUP: overview 将文档的默认初始可见性设置为概览模式。</li>
<li>#+HTML_HEAD: &lt;link rel="stylesheet" type="text/css" href="<a href="http://gongzhitaao.org/orgcss/org.css%22/">http://gongzhitaao.org/orgcss/org.css%22/</a>&gt;：在导出为 HTML 格式时，在 HTML 的头部添加一个链接，引用了一个外部 CSS 文件。</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">g-org-insert-note-header</span> <span style="color: #bc6ec5;">()</span> <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23450;&#20041;&#19968;&#20010;&#21517;&#20026;g-org-insert-note-header ()&#30340;&#20989;&#25968;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20989;&#25968;&#30340;&#19968;&#20010;&#29305;&#27530;&#22768;&#26126;&#65292;&#34920;&#31034;&#20989;&#25968;&#21487;&#20197;&#34987;&#29992;&#25143;&#35843;&#29992;</span>
  <span style="color: #bc6ec5;">(</span>insert
   <span style="color: #2d9574;">"#+TITLE: \n#+AUTHOR: yenao\n#+OPTIONS: toc:t num:10 H:10 ^:nil pri:t\n#+STARTUP: overview\n#+HTML_HEAD: </span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">&lt;link rel=\"stylesheet\" type=\"text</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">/css\" href=\"http:</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">/</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">/gongzhitaao.org</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">/orgcss</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">/org.css\"</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">/</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2d9574;">&gt;\n"</span>
   <span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">insert&#20989;&#25968;&#29992;&#20110;&#22312;&#24403;&#21069; &#20809;&#26631;&#20301;&#32622;&#25554;&#20837;&#25351;&#23450;&#30340;&#25991;&#26412;&#20869;&#23481;&#65292;&#24403;&#20320;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#26102;&#65292;&#23427;&#20250;&#22312;&#24403;&#21069;&#20809;&#26631;&#20301;&#32622;&#25554;&#20837;&#25991;&#26412;#+OPTIONS: ^:nil&#12289;#+TITLE:  &#21644;#+AUTHOR: yenao</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">#+LANGUAGE: zh-CN ;; zh-CN&#25110;&#32773;en</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4833705" class="outline-3">
<h3 id="org4833705"><span class="section-number-3">6.20.</span> init-edit.el 文件尾</h3>
<div class="outline-text-3" id="text-6-20">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(message "init-base configuration: %.2fs"</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;          </span><span style="color: #2aa1ae; background-color: #292e34;">(float-time (time-subtract (current-time) my/init-base-start-time)))</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-edit</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-edit.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9498782" class="outline-2">
<h2 id="org9498782"><span class="section-number-2">7.</span> init-org.el</h2>
<div class="outline-text-2" id="text-7">
</div>

<div id="outline-container-orga261f18" class="outline-3">
<h3 id="orga261f18"><span class="section-number-3">7.1.</span> init-org.el 文件头</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-org.el --- Org mode settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org51b5194" class="outline-3">
<h3 id="org51b5194"><span class="section-number-3">7.2.</span> org-appear自动展开强调链接</h3>
<div class="outline-text-3" id="text-7-2">
<p>
通过 <a href="https://hub.nuaa.cf/awth13/org-appear">org-appear</a> 插件，当我们的光标移动到Org mode里的强调、链接上时，会自动展开，这样方便进行编辑。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">org-appear</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>org-mode . org-appear-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-appear-autolinks t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-appear-autosubmarkers t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-appear-autoentities t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-appear-autokeywords t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-appear-inside-latex t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org46371e5" class="outline-3">
<h3 id="org46371e5"><span class="section-number-3">7.3.</span> org-auto-tangle自动tangle设置</h3>
<div class="outline-text-3" id="text-7-3">
<p>
<a href="https://hub.nuaa.cf/yilkalargaw/org-auto-tangle">org-auto-tangle</a> 插件可以在Org mode下自动进行tangle。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">org-auto-tangle</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>org-mode . org-auto-tangle-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-auto-tangle-default t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab1ace5" class="outline-3">
<h3 id="orgab1ace5"><span class="section-number-3">7.4.</span> org-capture快速记录设置</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">org-capture</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">"C-c c"</span> . <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #67b11d;">()</span> <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #67b11d;">)</span> <span style="color: #67b11d;">(</span>org-capture<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span>org-capture-mode . <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #b1951d;">()</span>
                               <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-local</span> org-complete-tags-always-offer-all-agenda-tags t<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span>org-capture-mode . delete-other-windows<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>org-capture-use-agenda-date nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">define common template</span>
  <span style="color: #bc6ec5;">(</span>org-capture-templates `<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span><span style="color: #2d9574;">"t"</span> <span style="color: #2d9574;">"Tasks"</span> entry <span style="color: #b1951d;">(</span>file+headline <span style="color: #2d9574;">"tasks.org"</span> <span style="color: #2d9574;">"Reminders"</span><span style="color: #b1951d;">)</span>
                            <span style="color: #2d9574;">"* TODO %i%?"</span>
                            <span style="color: #4f97d7;">:empty-lines-after</span> 1
                            <span style="color: #4f97d7;">:prepend</span> t<span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"n"</span> <span style="color: #2d9574;">"Notes"</span> entry <span style="color: #b1951d;">(</span>file+headline <span style="color: #2d9574;">"capture.org"</span> <span style="color: #2d9574;">"Notes"</span><span style="color: #b1951d;">)</span>
                            <span style="color: #2d9574;">"* %? %^g\n%i\n"</span>
                            <span style="color: #4f97d7;">:empty-lines-after</span> 1<span style="color: #67b11d;">)</span>
                           <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">For EWW</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"b"</span> <span style="color: #2d9574;">"Bookmarks"</span> entry <span style="color: #b1951d;">(</span>file+headline <span style="color: #2d9574;">"capture.org"</span> <span style="color: #2d9574;">"Bookmarks"</span><span style="color: #b1951d;">)</span>
                            <span style="color: #2d9574;">"* %:description\n\n%a%?"</span>
                            <span style="color: #4f97d7;">:empty-lines</span> 1
                            <span style="color: #4f97d7;">:immediate-finish</span> t<span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"d"</span> <span style="color: #2d9574;">"Diary"</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"dt"</span> <span style="color: #2d9574;">"Today's TODO list"</span> entry <span style="color: #b1951d;">(</span>file+olp+datetree <span style="color: #2d9574;">"diary.org"</span><span style="color: #b1951d;">)</span>
                            <span style="color: #2d9574;">"* Today's TODO list [/]\n%T\n\n** TODO %?"</span>
                            <span style="color: #4f97d7;">:empty-lines</span> 1
                            <span style="color: #4f97d7;">:jump-to-captured</span> t<span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"do"</span> <span style="color: #2d9574;">"Other stuff"</span> entry <span style="color: #b1951d;">(</span>file+olp+datetree <span style="color: #2d9574;">"diary.org"</span><span style="color: #b1951d;">)</span>
                            <span style="color: #2d9574;">"* %?\n%T\n\n%i"</span>
                            <span style="color: #4f97d7;">:empty-lines</span> 1
                            <span style="color: #4f97d7;">:jump-to-captured</span> t<span style="color: #67b11d;">)</span>
                           <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5613151" class="outline-3">
<h3 id="org5613151"><span class="section-number-3">7.5.</span> denote笔记设置</h3>
<div class="outline-text-3" id="text-7-5">
<p>
<a href="https://protesilaos.com/emacs/denote">denote</a> 是一个轻量级的笔记插件，拥有良好的文件名命名模板。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">denote</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>dired-mode . denote-dired-mode-in-directories<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c d n"</span> . denote<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c d d"</span> . denote-date<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c d t"</span> . denote-type<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c d s"</span> . denote-subdirectory<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c d f"</span> . denote-open-or-create<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c d r"</span> . denote-dired-rename-file<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">with-eval-after-load</span> 'org-capture
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-org-capture-specifiers <span style="color: #2d9574;">"%l\n%i\n%?"</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>add-to-list 'org-capture-templates
                 '<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"N"</span> <span style="color: #2d9574;">"New note (with denote.el)"</span> plain
                   <span style="color: #b1951d;">(</span>file denote-last-path<span style="color: #b1951d;">)</span>
                   #'denote-org-capture
                   <span style="color: #4f97d7;">:no-save</span> t
                   <span style="color: #4f97d7;">:immediate-finish</span> nil
                   <span style="color: #4f97d7;">:kill-buffer</span> t
                   <span style="color: #4f97d7;">:jump-to-captured</span> t<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-directory <span style="color: #2d9574;">(</span>expand-file-name <span style="color: #2d9574;">"~/org/denote/"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-known-keywords '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"emacs"</span> <span style="color: #2d9574;">"entertainment"</span> <span style="color: #2d9574;">"reading"</span> <span style="color: #2d9574;">"studying"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-infer-keywords t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-sort-keywords t<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">org is default, set others such as text, markdown-yaml, markdown-toml</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-file-type nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-prompts '<span style="color: #2d9574;">(</span>title keywords<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">We allow multi-word keywords by default.  The author's personal</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">preference is for single-word keywords for a more rigid workflow.</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-allow-multi-word-keywords t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-date-format nil<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">If you use Markdown or plain text files (Org renders links as buttons</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">right away)</span>
  <span style="color: #bc6ec5;">(</span>add-hook 'find-file-hook #'denote-link-buttonize-buffer<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> denote-dired-rename-expert nil<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">OR if only want it in `</span><span style="color: #a45bad; background-color: #292e34;">denote-dired-directories</span><span style="color: #2aa1ae; background-color: #292e34;">':</span>
  <span style="color: #bc6ec5;">(</span>add-hook 'dired-mode-hook #'denote-dired-mode-in-directories<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc3d677" class="outline-3">
<h3 id="orgbc3d677"><span class="section-number-3">7.6.</span> consult-notes查找笔记</h3>
<div class="outline-text-3" id="text-7-6">
<p>
<a href="https://hub.nuaa.cf/mclear-tools/consult-notes">consult-notes</a> 插件可以通过consult快速找到笔记。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">consult-notes</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:commands</span> <span style="color: #bc6ec5;">(</span>consult-notes
             consult-notes-search-in-all-notes<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c n f"</span> . consult-notes<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c n c"</span> . consult-notes-search-in-all-notes<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> consult-notes-file-dir-sources
        `<span style="color: #2d9574;">(</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"work"</span>    ?w ,<span style="color: #b1951d;">(</span>concat org-directory <span style="color: #2d9574;">"/midea/"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"article"</span> ?a ,<span style="color: #b1951d;">(</span>concat org-directory <span style="color: #2d9574;">"/article/"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org"</span>     ?o ,<span style="color: #b1951d;">(</span>concat org-directory <span style="color: #2d9574;">"/"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"hugo"</span>    ?h ,<span style="color: #b1951d;">(</span>concat org-directory <span style="color: #2d9574;">"/hugo/"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"books"</span>   ?b ,<span style="color: #b1951d;">(</span>concat <span style="color: #4f97d7;">(</span>getenv <span style="color: #2d9574;">"HOME"</span><span style="color: #4f97d7;">)</span> <span style="color: #2d9574;">"/Books/"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">embark support</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">with-eval-after-load</span> 'embark
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">consult-notes-open-dired</span> <span style="color: #67b11d;">(</span>cand<span style="color: #67b11d;">)</span>
      <span style="color: #9f8766;">"Open notes directory dired with point on file CAND."</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"fNote: "</span><span style="color: #67b11d;">)</span>
      <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">dired-jump is in dired-x.el but is moved to dired in Emacs 28</span>
      <span style="color: #67b11d;">(</span>dired-jump nil cand<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">consult-notes-marked</span> <span style="color: #67b11d;">(</span>cand<span style="color: #67b11d;">)</span>
      <span style="color: #9f8766;">"Open a notes file CAND in Marked 2.</span>
<span style="color: #9f8766;">Marked 2 is a mac app that renders markdown."</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"fNote: "</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>call-process-shell-command <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"open -a \"Marked 2\" \"%s\""</span> <span style="color: #4f97d7;">(</span>expand-file-name cand<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">consult-notes-grep</span> <span style="color: #67b11d;">(</span>cand<span style="color: #67b11d;">)</span>
      <span style="color: #9f8766;">"Run grep in directory of notes file CAND."</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"fNote: "</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>consult-grep <span style="color: #b1951d;">(</span>file-name-directory cand<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

    <span style="color: #2d9574;">(</span>embark-define-keymap consult-notes-map
                          <span style="color: #2d9574;">"Keymap for Embark notes actions."</span>
                          <span style="color: #4f97d7;">:parent</span> embark-file-map
                          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"d"</span> consult-notes-dired<span style="color: #67b11d;">)</span>
                          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"g"</span> consult-notes-grep<span style="color: #67b11d;">)</span>
                          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"m"</span> consult-notes-marked<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

    <span style="color: #2d9574;">(</span>add-to-list 'embark-keymap-alist `<span style="color: #67b11d;">(</span>,consult-notes-category . consult-notes-map<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">make embark-export use dired for notes</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setf</span> <span style="color: #67b11d;">(</span>alist-get consult-notes-category embark-exporters-alist<span style="color: #67b11d;">)</span> #'embark-export-dired<span style="color: #2d9574;">)</span>
    <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0625961" class="outline-3">
<h3 id="org0625961"><span class="section-number-3">7.7.</span> org-super-links反链设置</h3>
<div class="outline-text-3" id="text-7-7">
<p>
<a href="https://github.com/toshism/org-super-links">org-super-links</a> 插件可以设置反向链接。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span>quelpa
 '<span style="color: #bc6ec5;">(</span>org-super-liks
   <span style="color: #4f97d7;">:fetcher</span> git
   <span style="color: #4f97d7;">:url</span> <span style="color: #2d9574;">"https://hub.nuaa.cf/toshism/org-super-links"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">org-super-links</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c s s"</span>   . org-super-links-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c s l"</span>   . org-super-links-store-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c s C-l"</span> . org-super-links-insert-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c s d"</span>   . org-super-links-quick-insert-drawer-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c s i"</span>   . org-super-links-quick-insert-inline-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c s C-d"</span> . org-super-links-delete-link<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-super-links-related-into-drawer t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-super-links-link-prefix 'org-super-links-link-prefix-timestamp<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7345308" class="outline-3">
<h3 id="org7345308"><span class="section-number-3">7.8.</span> ox文件导出通用设置</h3>
<div class="outline-text-3" id="text-7-8">
<p>
下面是org文件导出的通用设置。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ox</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-toc t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-tags 'not-in-toc<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-drawers nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-priority t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-footnotes t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-smart-quotes t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-section-numbers t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-sub-superscripts '{}<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">`</span><span style="color: #a45bad; background-color: #292e34;">org-export-use-babel</span><span style="color: #2aa1ae; background-color: #292e34;">' set to nil will cause all source block header arguments to be ignored This means that code blocks with the argument :exports none or :exports results will end up in the export.</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">See:</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">https://stackoverflow.com/questions/29952543/how-do-i-prevent-org-mode-from-executing-all-of-the-babel-source-blocks</span>
  <span style="color: #bc6ec5;">(</span>org-export-use-babel t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-headline-levels 9<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-coding-system 'utf-8<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-with-broken-links 'mark<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-export-default-language <span style="color: #2d9574;">"zh-CN"</span><span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#40664;&#35748;&#26159;en</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(org-ascii-text-width 72)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org10570c5" class="outline-3">
<h3 id="org10570c5"><span class="section-number-3">7.9.</span> org导出后端设置</h3>
<div class="outline-text-3" id="text-7-9">
</div>
<div id="outline-container-org70cf43a" class="outline-4">
<h4 id="org70cf43a"><span class="section-number-4">7.9.1.</span> ox-html导出HTML设置</h4>
<div class="outline-text-4" id="text-7-9-1">
<p>
我们先来对HTML导出做一个基本设置：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ox-html</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">add support for video</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">org-video-link-export</span> <span style="color: #2d9574;">(</span>path desc backend<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>ext <span style="color: #4f97d7;">(</span>file-name-extension path<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">cond</span>
       <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">(</span>eq 'html backend<span style="color: #4f97d7;">)</span>
        <span style="color: #4f97d7;">(</span>format <span style="color: #2d9574;">"&lt;video width='</span><span style="color: #a45bad;">800</span><span style="color: #2d9574;">' preload='</span><span style="color: #a45bad;">metadata</span><span style="color: #2d9574;">' controls='</span><span style="color: #a45bad;">controls</span><span style="color: #2d9574;">'&gt;&lt;source type='</span><span style="color: #a45bad;">video/%s</span><span style="color: #2d9574;">' src='</span><span style="color: #a45bad;">%s</span><span style="color: #2d9574;">' /&gt;&lt;/video&gt;"</span> ext path<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
       <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">fall-through case for everything else</span>
       <span style="color: #b1951d;">(</span>t
        path<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-link-set-parameters <span style="color: #2d9574;">"video"</span> <span style="color: #4f97d7;">:export</span> 'org-video-link-export<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>org-html-doctype <span style="color: #2d9574;">"html5"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-html-html5-fancy t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-html-checkbox-type 'unicode<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-html-validation-link nil<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">htmlize</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>htmlize-pre-style t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>htmlize-output-type 'inline-css<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6bfbb04" class="outline-4">
<h4 id="org6bfbb04"><span class="section-number-4">7.9.2.</span> ox-latex导出PDF设置</h4>
<div class="outline-text-4" id="text-7-9-2">
<p>
<code>ox-latex</code> 是Org mode自带的功能，可以将Org文件导出为latex文件和PDF文件。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ox-latex</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:defer</span> t
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'org-latex-classes
               '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"cn-article"</span>
                 <span style="color: #2d9574;">"\\documentclass[UTF8,a4paper]{article}"</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\section{%s}"</span> . <span style="color: #2d9574;">"\\section*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\subsection{%s}"</span> . <span style="color: #2d9574;">"\\subsection*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\subsubsection{%s}"</span> . <span style="color: #2d9574;">"\\subsubsection*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\paragraph{%s}"</span> . <span style="color: #2d9574;">"\\paragraph*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\subparagraph{%s}"</span> . <span style="color: #2d9574;">"\\subparagraph*{%s}"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #bc6ec5;">(</span>add-to-list 'org-latex-classes
               '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"cn-report"</span>
                 <span style="color: #2d9574;">"\\documentclass[11pt,a4paper]{report}"</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\chapter{%s}"</span> . <span style="color: #2d9574;">"\\chapter*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\section{%s}"</span> . <span style="color: #2d9574;">"\\section*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\subsection{%s}"</span> . <span style="color: #2d9574;">"\\subsection*{%s}"</span><span style="color: #67b11d;">)</span>
                 <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"\\subsubsection{%s}"</span> . <span style="color: #2d9574;">"\\subsubsection*{%s}"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-latex-default-class <span style="color: #2d9574;">"cn-article"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-latex-image-default-height <span style="color: #2d9574;">"0.9\\textheight"</span>
        org-latex-image-default-width <span style="color: #2d9574;">"\\linewidth"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-latex-pdf-process
        '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"xelatex -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #2d9574;">"bibtex %b"</span>
          <span style="color: #2d9574;">"xelatex -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #2d9574;">"xelatex -interaction nonstopmode -output-directory %o %f"</span>
          <span style="color: #2d9574;">"rm -fr %b.out %b.log %b.tex %b.brf %b.bbl auto"</span>
          <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20351;&#29992; Listings &#23439;&#21253;&#26684;&#24335;&#21270;&#28304;&#20195;&#30721;(&#21482;&#26159;&#25226;&#20195;&#30721;&#26694;&#29992; listing &#29615;&#22659;&#26694;&#36215;&#26469;&#65292;&#36824;&#38656;&#35201;&#39069;&#22806;&#30340;&#35774;&#32622;)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-latex-listings t<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">mapping jupyter-python to Python</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'org-latex-listings-langs '<span style="color: #2d9574;">(</span>jupyter-python <span style="color: #2d9574;">"Python"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Options for \lset command&#65288;reference to listing Manual)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-latex-listings-options
        '<span style="color: #2d9574;">(</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"basicstyle"</span> <span style="color: #2d9574;">"\\small\\ttfamily"</span><span style="color: #67b11d;">)</span>       <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#28304;&#20195;&#30721;&#23383;&#20307;&#26679;&#24335;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"keywordstyle"</span> <span style="color: #2d9574;">"\\color{eminence}\\small"</span><span style="color: #67b11d;">)</span>                 <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20851;&#38190;&#35789;&#23383;&#20307;&#26679;&#24335;</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("identifierstyle" "\\color{doc}\\small")</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"commentstyle"</span> <span style="color: #2d9574;">"\\color{commentgreen}\\small\\itshape"</span><span style="color: #67b11d;">)</span>    <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#25209;&#27880;&#26679;&#24335;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"stringstyle"</span> <span style="color: #2d9574;">"\\color{red}\\small"</span><span style="color: #67b11d;">)</span>                       <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23383;&#31526;&#20018;&#26679;&#24335;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"showstringspaces"</span> <span style="color: #2d9574;">"false"</span><span style="color: #67b11d;">)</span>                                <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#23383;&#31526;&#20018;&#31354;&#26684;&#26174;&#31034;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"numbers"</span> <span style="color: #2d9574;">"left"</span><span style="color: #67b11d;">)</span>                                          <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#34892;&#21495;&#26174;&#31034;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"numberstyle"</span> <span style="color: #2d9574;">"\\color{preprocess}"</span><span style="color: #67b11d;">)</span>                       <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#34892;&#21495;&#26679;&#24335;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"stepnumber"</span> <span style="color: #2d9574;">"1"</span><span style="color: #67b11d;">)</span>                                          <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#34892;&#21495;&#36882;&#22686;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"xleftmargin"</span> <span style="color: #2d9574;">"2em"</span><span style="color: #67b11d;">)</span>                                       <span style="color: #2aa1ae; background-color: #292e34;">;</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("backgroundcolor" "\\color{background}")                   ; &#20195;&#30721;&#26694;&#32972;&#26223;&#33394;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"tabsize"</span> <span style="color: #2d9574;">"4"</span><span style="color: #67b11d;">)</span>                                             <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">TAB &#31561;&#25928;&#31354;&#26684;&#25968;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"captionpos"</span> <span style="color: #2d9574;">"t"</span><span style="color: #67b11d;">)</span>                                          <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26631;&#39064;&#20301;&#32622; top or buttom(t|b)</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"breaklines"</span> <span style="color: #2d9574;">"true"</span><span style="color: #67b11d;">)</span>                                       <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#33258;&#21160;&#26029;&#34892;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"breakatwhitespace"</span> <span style="color: #2d9574;">"true"</span><span style="color: #67b11d;">)</span>                                <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21482;&#22312;&#31354;&#26684;&#20998;&#34892;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"showspaces"</span> <span style="color: #2d9574;">"false"</span><span style="color: #67b11d;">)</span>                                      <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26174;&#31034;&#31354;&#26684;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"columns"</span> <span style="color: #2d9574;">"flexible"</span><span style="color: #67b11d;">)</span>                                      <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#21015;&#26679;&#24335;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"frame"</span> <span style="color: #2d9574;">"tb"</span><span style="color: #67b11d;">)</span>                                              <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20195;&#30721;&#26694;&#65306;single, or tb &#19978;&#19979;&#32447;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"frameleftmargin"</span> <span style="color: #2d9574;">"1.5em"</span><span style="color: #67b11d;">)</span>                                 <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">frame &#21521;&#21491;&#20559;&#31227;</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("frameround" "tttt")                                       ; &#20195;&#30721;&#26694;&#65306; &#22278;&#35282;</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("framesep" "0pt")</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("framerule" "1pt")                                         ; &#26694;&#30340;&#32447;&#23485;</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("rulecolor" "\\color{background}")                         ; &#26694;&#39068;&#33394;</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("fillcolor" "\\color{white}")</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">("rulesepcolor" "\\color{comdil}")</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"framexleftmargin"</span> <span style="color: #2d9574;">"5mm"</span><span style="color: #67b11d;">)</span>                                  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">let line numer inside frame</span>
          <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5aba2f" class="outline-4">
<h4 id="orgc5aba2f"><span class="section-number-4">7.9.3.</span> ox-gfm导出Markdown设置</h4>
<div class="outline-text-4" id="text-7-9-3">
<p>
我们通过 <a href="https://github.com/larstvei/ox-gfm">ox-gfm</a> 插件来导出Github样式的Markdown文件。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ox-gfm</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:after</span> ox<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5b3e11" class="outline-4">
<h4 id="orgd5b3e11"><span class="section-number-4">7.9.4.</span> ox-publish导出静态站点设置</h4>
<div class="outline-text-4" id="text-7-9-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">unless</span> <span style="color: #bc6ec5;">(</span>file-exists-p <span style="color: #2d9574;">"~/org"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>make-directory <span style="color: #2d9574;">"~/org"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span> 

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ox-publish</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:commands</span> <span style="color: #bc6ec5;">(</span>org-publish org-publish-all<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-export-global-macros
        '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span><span style="color: #2d9574;">"timestamp"</span> . <span style="color: #2d9574;">"@@html:&lt;span class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">sitemap &#29983;&#25104;&#20989;&#25968;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my/org-sitemap-date-entry-format</span> <span style="color: #2d9574;">(</span>entry style project<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY STYLE format that includes date."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>filename <span style="color: #4f97d7;">(</span>org-publish-find-title entry project<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #b1951d;">(</span>= <span style="color: #4f97d7;">(</span>length filename<span style="color: #4f97d7;">)</span> 0<span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"*%s*"</span> entry<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"{{{timestamp(%s)}}} [[file:%s][%s]]"</span>
                <span style="color: #4f97d7;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m-%d"</span>
                                    <span style="color: #bc6ec5;">(</span>org-publish-find-date entry project<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
                entry
                filename<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622; org-publish &#30340;&#39033;&#30446;&#21015;&#34920;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-publish-project-alist
        '<span style="color: #2d9574;">(</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#31508;&#35760;&#37096;&#20998;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org-notes"</span>
           <span style="color: #4f97d7;">:base-directory</span> <span style="color: #2d9574;">"~/org/"</span>
           <span style="color: #4f97d7;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
           <span style="color: #4f97d7;">:exclude</span> <span style="color: #2d9574;">"</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">(</span><span style="color: #2d9574;">tasks</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">test</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">scratch</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">diary</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">capture</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">mail</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">habits</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">resume</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">meetings</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">personal</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">org-beamer-example</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">)</span><span style="color: #2d9574;">\\.org</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">test</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">article</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">roam</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">hugo"</span>
           <span style="color: #4f97d7;">:publishing-directory</span> <span style="color: #2d9574;">"~/public_html/"</span>
           <span style="color: #4f97d7;">:recursive</span> t                 <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">include subdirectories if t</span>
           <span style="color: #4f97d7;">:publishing-function</span> org-html-publish-to-html
           <span style="color: #4f97d7;">:headline-levels</span> 6
           <span style="color: #4f97d7;">:auto-preamble</span> t
           <span style="color: #4f97d7;">:auto-sitemap</span> t
           <span style="color: #4f97d7;">:sitemap-filename</span> <span style="color: #2d9574;">"sitemap.org"</span>
           <span style="color: #4f97d7;">:sitemap-title</span> <span style="color: #2d9574;">"Sitemap"</span>
           <span style="color: #4f97d7;">:sitemap-format-entry</span> my/org-sitemap-date-entry-format<span style="color: #67b11d;">)</span>

          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#38745;&#24577;&#36164;&#28304;&#37096;&#20998;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org-static"</span>
           <span style="color: #4f97d7;">:base-directory</span> <span style="color: #2d9574;">"~/org/"</span>
           <span style="color: #4f97d7;">:base-extension</span> <span style="color: #2d9574;">"css</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">js</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">png</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">jpg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">gif</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">pdf</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">mp3</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">ogg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">swf</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">mov"</span>
           <span style="color: #4f97d7;">:publishing-directory</span> <span style="color: #2d9574;">"~/public_html/"</span>
           <span style="color: #4f97d7;">:recursive</span> t
           <span style="color: #4f97d7;">:publishing-function</span> org-publish-attachment<span style="color: #67b11d;">)</span>

          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#39033;&#30446;&#38598;&#21512;</span>
          <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org"</span>
           <span style="color: #4f97d7;">:components</span> <span style="color: #b1951d;">(</span><span style="color: #2d9574;">"org-notes"</span> <span style="color: #2d9574;">"org-static"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2c8044" class="outline-4">
<h4 id="orgb2c8044"><span class="section-number-4">7.9.5.</span> ox-hugo导出博客设置</h4>
<div class="outline-text-4" id="text-7-9-5">
<p>
<a href="https://github.com/kaushalmodi/ox-hugo">ox-hugo</a> 插件可以将 org 文件导出为 <a href="https://gohugo.io/">hugo</a> 需要的 Markdown 文件，并快速通过 hugo 进行博客的生成和发布。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ox-hugo</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:config</span>    

  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-hugo-base-dir <span style="color: #2d9574;">"~/ox-hugo/"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">with-eval-after-load</span> 'org-capture
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">org-hugo-new-subtree-post-capture-template</span> <span style="color: #67b11d;">()</span>
      <span style="color: #9f8766;">"Returns `</span><span style="color: #a45bad;">org-capture</span><span style="color: #9f8766;">' template string for new Hugo post.</span>
<span style="color: #9f8766;">See `</span><span style="color: #a45bad;">org-capture-templates</span><span style="color: #9f8766;">' for more information."</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">let*</span> <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">(</span>title <span style="color: #bc6ec5;">(</span>read-from-minibuffer <span style="color: #2d9574;">"Post Title: "</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">Prompt to enter the post title</span>
             <span style="color: #4f97d7;">(</span>fname <span style="color: #bc6ec5;">(</span>org-hugo-slug title<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>mapconcat #'identity
                   `<span style="color: #4f97d7;">(</span>
                     ,<span style="color: #bc6ec5;">(</span>concat <span style="color: #2d9574;">"* TODO "</span> title<span style="color: #bc6ec5;">)</span>
                     <span style="color: #2d9574;">":PROPERTIES:"</span>
                     ,<span style="color: #bc6ec5;">(</span>concat <span style="color: #2d9574;">":EXPORT_FILE_NAME: "</span> fname<span style="color: #bc6ec5;">)</span>
                     <span style="color: #2d9574;">":END:"</span>
                     <span style="color: #2d9574;">"%?\n"</span><span style="color: #4f97d7;">)</span>          <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">Place the cursor here finally</span>
                   <span style="color: #2d9574;">"\n"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

    <span style="color: #2d9574;">(</span>add-to-list 'org-capture-templates
                 '<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"h"</span>                <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">`</span><span style="color: #a45bad; background-color: #292e34;">org-capture</span><span style="color: #2aa1ae; background-color: #292e34;">' binding + h</span>
                   <span style="color: #2d9574;">"Hugo post"</span>
                   entry
                   <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">It is assumed that below file is present in `</span><span style="color: #a45bad; background-color: #292e34;">org-directory</span><span style="color: #2aa1ae; background-color: #292e34;">'</span>
                   <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">and that it has a "Blog Ideas" heading. It can even be a</span>
                   <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">symlink pointing to the actual location of capture.org!</span>
                   <span style="color: #b1951d;">(</span>file+olp <span style="color: #2d9574;">"capture.org"</span> <span style="color: #2d9574;">"Notes"</span><span style="color: #b1951d;">)</span>
                   <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">function</span> org-hugo-new-subtree-post-capture-template<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org955370e" class="outline-3">
<h3 id="org955370e"><span class="section-number-3">7.10.</span> toc-org目录自动生成</h3>
<div class="outline-text-3" id="text-7-10">
<p>
<a href="https://github.com/snosov1/toc-org">toc-org</a> 插件可以在Org文件里自动生成目录，只需给一个标题行设置一个标签为 <code>toc</code> 或 <code>toc_2</code> 即可（后者只生成2层）。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">toc-org</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>org-mode . toc-org-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org79a25d9" class="outline-3">
<h3 id="org79a25d9"><span class="section-number-3">7.11.</span> ol新增链接类型</h3>
<div class="outline-text-3" id="text-7-11">
<p>
<a href="https://google.com/search?q=Org%20mode">google Org mode</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">ol</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:defer</span> t
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>org-link-keep-stored-after-insertion t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>org-link-abbrev-alist '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span><span style="color: #2d9574;">"github"</span>        . <span style="color: #2d9574;">"https://github.com/"</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"gitlab"</span>        . <span style="color: #2d9574;">"https://gitlab.com/"</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"google"</span>        . <span style="color: #2d9574;">"https://google.com/search?q="</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"baidu"</span>         . <span style="color: #2d9574;">"https://baidu.com/s?wd="</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"rfc"</span>           . <span style="color: #2d9574;">"https://tools.ietf.org/html/"</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"wiki"</span>          . <span style="color: #2d9574;">"https://en.wikipedia.org/wiki/"</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"youtube"</span>       . <span style="color: #2d9574;">"https://youtube.com/watch?v="</span><span style="color: #67b11d;">)</span>
                           <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"zhihu"</span>         . <span style="color: #2d9574;">"https://zhihu.com/question/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5baee62" class="outline-3">
<h3 id="org5baee62"><span class="section-number-3">7.12.</span> 图片粘贴</h3>
<div class="outline-text-3" id="text-7-12">
<p>
通过 <code>pngpaste</code> 这个命令行工具，将系统剪贴板里的图片，输出到当前文件同名的 <code>assets</code> 文件夹下，然后自动在当前org文件的光标处插入图片链接，并设置图片链接的宽度属性。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">emacs</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:after</span> org
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7;">:map</span> org-mode-map
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-p"</span> . my/org-insert-clipboard-image<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my/org-insert-clipboard-image</span> <span style="color: #2d9574;">(</span>width<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"create a time stamped unique-named file from the clipboard in the sub-directory</span>
<span style="color: #9f8766;"> (%filename.assets) as the org-buffer and insert a link to this file."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #67b11d;">(</span>list
                  <span style="color: #b1951d;">(</span>read-string <span style="color: #4f97d7;">(</span>format <span style="color: #2d9574;">"Input image width, default is 800: "</span><span style="color: #4f97d7;">)</span>
                               nil nil <span style="color: #2d9574;">"800"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#22270;&#29255;&#23384;&#25918;&#30340;&#25991;&#20214;&#22841;&#20301;&#32622;&#20026; `</span><span style="color: #a45bad; background-color: #292e34;">&#24403;&#21069;Org&#25991;&#20214;&#21516;&#21517;.assets</span><span style="color: #2aa1ae; background-color: #292e34;">'</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> foldername <span style="color: #67b11d;">(</span>concat <span style="color: #b1951d;">(</span>file-name-base <span style="color: #4f97d7;">(</span>buffer-file-name<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span> <span style="color: #2d9574;">".assets/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>file-exists-p foldername<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>mkdir foldername<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35774;&#32622;&#22270;&#29255;&#30340;&#25991;&#20214;&#21517;&#65292;&#26684;&#24335;&#20026; `</span><span style="color: #a45bad; background-color: #292e34;">img_&#24180;&#26376;&#26085;_&#26102;&#20998;&#31186;.png</span><span style="color: #2aa1ae; background-color: #292e34;">'</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> imgName <span style="color: #67b11d;">(</span>concat <span style="color: #2d9574;">"img_"</span> <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y%m%d_%H%M%S"</span><span style="color: #b1951d;">)</span> <span style="color: #2d9574;">".png"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22270;&#29255;&#25991;&#20214;&#30340;&#30456;&#23545;&#36335;&#24452;</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> relativeFilename <span style="color: #67b11d;">(</span>concat <span style="color: #b1951d;">(</span>file-name-base <span style="color: #4f97d7;">(</span>buffer-name<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span> <span style="color: #2d9574;">".assets/"</span> imgName<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26681;&#25454;&#19981;&#21516;&#30340;&#25805;&#20316;&#31995;&#32479;&#35774;&#32622;&#19981;&#21516;&#30340;&#21629;&#20196;&#34892;&#24037;&#20855;</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">cond</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>string-equal system-type <span style="color: #2d9574;">"gnu/linux"</span><span style="color: #b1951d;">)</span>
           <span style="color: #b1951d;">(</span>shell-command <span style="color: #4f97d7;">(</span>concat <span style="color: #2d9574;">"xclip -selection clipboard -t image/png -o &gt; "</span> relativeFilename<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>string-equal system-type <span style="color: #2d9574;">"darwin"</span><span style="color: #b1951d;">)</span>
           <span style="color: #b1951d;">(</span>shell-command <span style="color: #4f97d7;">(</span>concat <span style="color: #2d9574;">"pngpaste "</span> relativeFilename<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#32473;&#31896;&#36148;&#22909;&#30340;&#22270;&#29255;&#38142;&#25509;&#21152;&#19978;&#23485;&#24230;&#23646;&#24615;&#65292;&#26041;&#20415;&#23548;&#20986;</span>
    <span style="color: #2d9574;">(</span>insert <span style="color: #67b11d;">(</span>concat <span style="color: #2d9574;">"\n#+DOWNLOADED: screenshot @ "</span>
                    <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m-%d %a %H:%M:%S"</span> <span style="color: #4f97d7;">(</span>current-time<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
                    <span style="color: #2d9574;">"\n#+CAPTION: \n#+ATTR_ORG: :width "</span>
                    width
                    <span style="color: #2d9574;">"\n#+ATTR_LATEX: :width "</span>
                    <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #4f97d7;">(</span>&gt;= <span style="color: #bc6ec5;">(</span>/ <span style="color: #2d9574;">(</span>string-to-number width<span style="color: #2d9574;">)</span> 800.0<span style="color: #bc6ec5;">)</span> 1.0<span style="color: #4f97d7;">)</span>
                        <span style="color: #2d9574;">"1.0"</span>
                      <span style="color: #4f97d7;">(</span>number-to-string <span style="color: #bc6ec5;">(</span>/ <span style="color: #2d9574;">(</span>string-to-number width<span style="color: #2d9574;">)</span> 800.0<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
                    <span style="color: #2d9574;">"\\linewidth :float nil\n"</span>
                    <span style="color: #2d9574;">"#+ATTR_HTML: :width "</span>
                    width
                    <span style="color: #2d9574;">"\n[[file:"</span> relativeFilename <span style="color: #2d9574;">"]]\n"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#37325;&#26032;&#26174;&#31034;&#19968;&#19979;&#22270;&#29255;</span>
    <span style="color: #2d9574;">(</span>org-redisplay-inline-images<span style="color: #2d9574;">)</span>
    <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd00f842" class="outline-3">
<h3 id="orgd00f842"><span class="section-number-3">7.13.</span> init-org.el 文件尾</h3>
<div class="outline-text-3" id="text-7-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-org</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-org.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge02de09" class="outline-2">
<h2 id="orge02de09"><span class="section-number-2">8.</span> init-completion.el</h2>
<div class="outline-text-2" id="text-8">
<p>
Emacs的补全设置。
</p>
</div>

<div id="outline-container-org1aedf74" class="outline-3">
<h3 id="org1aedf74"><span class="section-number-3">8.1.</span> init-completion.el 文件头</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-completion.el --- Completion settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org0d4fc82" class="outline-3">
<h3 id="org0d4fc82"><span class="section-number-3">8.2.</span> vertico 提供了一个垂直样式的补全系统</h3>
<div class="outline-text-3" id="text-8-2">
<p>
<a href="https://github.com/minad/vertico">vertico</a> 插件提供了一个垂直样式的补全系统。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">vertico</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . vertico-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7;">:map</span> minibuffer-local-map
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-&lt;DEL&gt;"</span> . my/minibuffer-backward-kill<span style="color: #2d9574;">)</span>
              <span style="color: #4f97d7;">:map</span> vertico-map
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-q"</span> . vertico-quick-insert<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">use C-g to exit</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my/minibuffer-backward-kill</span> <span style="color: #2d9574;">(</span>arg<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"When minibuffer is completing a file name delete up to parent</span>
<span style="color: #9f8766;">folder, otherwise delete a word"</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"p"</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> minibuffer-completing-file-name
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Borrowed from https://github.com/raxod502/selectrum/issues/498#issuecomment-803283608</span>
        <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #b1951d;">(</span>string-match-p <span style="color: #2d9574;">"/."</span> <span style="color: #4f97d7;">(</span>minibuffer-contents<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
            <span style="color: #b1951d;">(</span>zap-up-to-char <span style="color: #4f97d7;">(</span>- arg<span style="color: #4f97d7;">)</span> ?/<span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span>delete-minibuffer-contents<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>backward-kill-word arg<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Do not allow the cursor in the minibuffer prompt</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> minibuffer-prompt-properties
        '<span style="color: #2d9574;">(</span>read-only t cursor-intangible t face minibuffer-prompt<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>add-hook 'minibuffer-setup-hook #'cursor-intangible-mode<span style="color: #bc6ec5;">)</span>

  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> vertico-cycle t<span style="color: #bc6ec5;">)</span>                <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">cycle from last to first</span>
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>vertico-count 15<span style="color: #bc6ec5;">)</span>                    <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">number of candidates to display, default is 10</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org33f2ed5" class="outline-3">
<h3 id="org33f2ed5"><span class="section-number-3">8.3.</span> orderless 插件提供一种无序的补全新姿势，将一个搜索的范式变成数个以空格分隔的部分</h3>
<div class="outline-text-3" id="text-8-3">
<p>
<a href="https://github.com/oantolin/orderless">oderless</a> 插件提供一种无序的补全新姿势，将一个搜索的范式变成数个以空格分隔的部分，各部分之间没有顺序，你要做的就是根据记忆输入关键词、空格、关键词。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">support Pinyin first character match for orderless, avy etc.</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">pinyinlib</span>
  <span style="color: #4f97d7;">:ensure</span> t<span style="color: #4f97d7;">)</span>

<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">orderless &#26159;&#19968;&#31181;&#21746;&#23398;&#24605;&#24819;</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">orderless</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> completion-styles '<span style="color: #2d9574;">(</span>orderless partial-completion basic<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> orderless-component-separator <span style="color: #2d9574;">"[ &amp;]"</span><span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&amp; is for company because space will break completion</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> completion-category-defaults nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> completion-category-overrides nil<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">make completion support pinyin, refer to</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">https://emacs-china.org/t/vertico/17913/2</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">completion--regex-pinyin</span> <span style="color: #2d9574;">(</span>str<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>orderless-regexp <span style="color: #67b11d;">(</span>pinyinlib-build-regexp-string str<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'orderless-matching-styles 'completion--regex-pinyin<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9486511" class="outline-3">
<h3 id="org9486511"><span class="section-number-3">8.4.</span> marginalia 给迷你缓冲区的补全候选条目添加一些提示</h3>
<div class="outline-text-3" id="text-8-4">
<p>
<a href="https://github.com/minad/marginalia">marginalia</a> 插件给迷你缓冲区的补全候选条目添加一些提示。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">minibuffer helpful annotations</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">marginalia</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . marginalia-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>marginalia-annotators '<span style="color: #2d9574;">(</span>marginalia-annotators-heavy marginalia-annotators-light nil<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org424e504" class="outline-3">
<h3 id="org424e504"><span class="section-number-3">8.5.</span> consult 基于Emacs自带的补全机制，提供了一系列的补全命令</h3>
<div class="outline-text-3" id="text-8-5">
<p>
<a href="https://github.com/minad/consult">consult</a> 插件基于Emacs自带的补全机制，提供了一系列的补全命令。
</p>

<blockquote>
<p>
For locate on MacOS:
</p>

<ol class="org-ol">
<li><code>locate</code> is not enabled in MacOS by default. We need to enable it via:
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist</li>

<li>Then we need to wait <code>locate</code> to build db for the whole file system.</li>

<li>If there is something wrong with updating locate db, we can update it manually via:
chomd 755 ~/Library ~/Downloads ~/Documents ~/Desktop
sudo /usr/libexec/locate.updatedb</li>
</ol>
</blockquote>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">consult</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:after</span> org
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap goto-line<span style="color: #67b11d;">]</span>                     . consult-goto-line<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap isearch-forward<span style="color: #67b11d;">]</span>               . consult-line-symbol-at-point<span style="color: #2d9574;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">my-consult-ripgrep-or-line</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap switch-to-buffer<span style="color: #67b11d;">]</span>              . consult-buffer<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap switch-to-buffer-other-window<span style="color: #67b11d;">]</span> . consult-buffer-other-window<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap switch-to-buffer-other-frame<span style="color: #67b11d;">]</span>  . consult-buffer-other-frame<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap yank-pop<span style="color: #67b11d;">]</span>                      . consult-yank-pop<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap apropos<span style="color: #67b11d;">]</span>                       . consult-apropos<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap bookmark-jump<span style="color: #67b11d;">]</span>                 . consult-bookmark<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap goto-line<span style="color: #67b11d;">]</span>                     . consult-goto-line<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap imenu<span style="color: #67b11d;">]</span>                         . consult-imenu<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap multi-occur<span style="color: #67b11d;">]</span>                   . consult-multi-occur<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap recentf-open-files<span style="color: #67b11d;">]</span>            . consult-recent-file<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-x j"</span>                               . consult-mark<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c g"</span>                               . consult-ripgrep<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c f"</span>                               . consult-find<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\e\ef"</span>                               . consult-locate<span style="color: #2d9574;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">need to enable locate first</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c n h"</span>                             . my/consult-find-org-headings<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> org-mode-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c C-j"</span>                             . consult-org-heading<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> minibuffer-local-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-r"</span>                                 . consult-history<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> isearch-mode-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-;"</span>                                 . consult-line<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> prog-mode-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-c C-j"</span>                             . consult-outline<span style="color: #2d9574;">)</span>
         <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>completion-list-mode . consult-preview-at-point-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Optionally configure the register formatting. This improves the register</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">preview for `</span><span style="color: #a45bad; background-color: #292e34;">consult-register</span><span style="color: #2aa1ae; background-color: #292e34;">', `</span><span style="color: #a45bad; background-color: #292e34;">consult-register-load</span><span style="color: #2aa1ae; background-color: #292e34;">',</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">`</span><span style="color: #a45bad; background-color: #292e34;">consult-register-store</span><span style="color: #2aa1ae; background-color: #292e34;">' and the Emacs built-ins.</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> register-preview-delay 0
        register-preview-function #'consult-register-format<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Optionally tweak the register preview window.</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">This adds thin lines, sorting and hides the mode line of the window.</span>
  <span style="color: #bc6ec5;">(</span>advice-add #'register-preview <span style="color: #4f97d7;">:override</span> #'consult-register-window<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Use Consult to select xref locations with preview</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> xref-show-xrefs-function #'consult-xref
        xref-show-definitions-function #'consult-xref<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">MacOS locate doesn't support `--ignore-case --existing' args.</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> consult-locate-args <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">pcase</span> system-type
                              <span style="color: #67b11d;">(</span>'gnu/linux <span style="color: #2d9574;">"locate --ignore-case --existing --regex"</span><span style="color: #67b11d;">)</span>
                              <span style="color: #67b11d;">(</span>'darwin <span style="color: #2d9574;">"mdfind -name"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span>consult-customize
   consult-theme
   <span style="color: #4f97d7;">:preview-key</span> '<span style="color: #2d9574;">(</span><span style="color: #4f97d7;">:debounce</span> 0.2 any<span style="color: #2d9574;">)</span>
   consult-ripgrep consult-git-grep consult-grep
   consult-bookmark consult-recent-file consult-xref
   consult--source-recent-file consult--source-project-recent-file consult--source-bookmark
   <span style="color: #4f97d7;">:preview-key</span> '<span style="color: #2d9574;">(</span><span style="color: #4f97d7;">:debounce</span> 0.4 any<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Optionally configure the narrowing key.</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Both &lt; and C-+ work reasonably well.</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> consult-narrow-key <span style="color: #2d9574;">"&lt;"</span><span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(kbd "C-+")</span>

  <span style="color: #bc6ec5;">(</span>autoload 'projectile-project-root <span style="color: #2d9574;">"projectile"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> consult-project-root-function #'projectile-project-root<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">search all org file headings under a directory, see:</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">https://emacs-china.org/t/org-files-heading-entry/20830/4</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my/consult-find-org-headings</span> <span style="color: #2d9574;">(</span><span style="color: #ce537a; font-weight: bold;">&amp;optional</span> match<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"find headngs in all org files."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>consult-org-heading match <span style="color: #67b11d;">(</span>directory-files org-directory t <span style="color: #2d9574;">"^[0-9]\\{8\\}.+\\.org$"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Use `</span><span style="color: #a45bad; background-color: #292e34;">consult-ripgrep</span><span style="color: #2aa1ae; background-color: #292e34;">' instead of `</span><span style="color: #a45bad; background-color: #292e34;">consult-line</span><span style="color: #2aa1ae; background-color: #292e34;">' in large buffers</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">consult-line-symbol-at-point</span> <span style="color: #2d9574;">()</span>
    <span style="color: #9f8766;">"Consult line the synbol where the point is"</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>consult-line <span style="color: #67b11d;">(</span>thing-at-point 'symbol<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5b97a54" class="outline-3">
<h3 id="org5b97a54"><span class="section-number-3">8.6.</span> company Emacs最广为使用的补全插件</h3>
<div class="outline-text-3" id="text-8-6">
<p>
Emacs最广为使用的补全插件便是 <a href="https://company-mode.github.io/">company-mode</a>，其官方主页上已有详细的说明。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">company</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:defer</span> 3
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>global-company-mode t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> company-minimum-prefix-length 1<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> company-tooltip-align-annotations t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> company-idle-delay 0.0<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> company-show-numbers t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> company-selection-wrap-around t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> company-transformers '<span style="color: #2d9574;">(</span>company-sort-by-occurrence<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9d7fbe1" class="outline-3">
<h3 id="org9d7fbe1"><span class="section-number-3">8.7.</span> yasnippet模板补全</h3>
<div class="outline-text-3" id="text-8-7">
<p>
<a href="https://github.com/joaotavora/yasnippet">yasnippet</a> 插件是一个非常强大的模板补全系统。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">yasnippet settings</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">yasnippet</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:diminish</span> yas-minor-mode
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span>after-init . yas-reload-all<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>prog-mode LaTeX-mode org-mode<span style="color: #67b11d;">)</span> . yas-minor-mode<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Suppress warning for yasnippet code.</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">require</span> '<span style="color: #a45bad;">warnings</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'warning-suppress-types '<span style="color: #2d9574;">(</span>yasnippet backquote-change<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> yas-prompt-functions '<span style="color: #2d9574;">(</span>yas-x-prompt yas-dropdown-prompt<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">smarter-yas-expand-next-field</span> <span style="color: #2d9574;">()</span>
    <span style="color: #9f8766;">"Try to `</span><span style="color: #a45bad;">yas-expand</span><span style="color: #9f8766;">' then `</span><span style="color: #a45bad;">yas-next-field</span><span style="color: #9f8766;">' at current cursor position."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>old-point <span style="color: #4f97d7;">(</span>point<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span>old-tick <span style="color: #4f97d7;">(</span>buffer-chars-modified-tick<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>yas-expand<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">when</span> <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">and</span> <span style="color: #4f97d7;">(</span>eq old-point <span style="color: #bc6ec5;">(</span>point<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
                 <span style="color: #4f97d7;">(</span>eq old-tick <span style="color: #bc6ec5;">(</span>buffer-chars-modified-tick<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">ignore-errors</span> <span style="color: #4f97d7;">(</span>yas-next-field<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcdaf9e5" class="outline-3">
<h3 id="orgcdaf9e5"><span class="section-number-3">8.8.</span> embark 插件提供了一系列的迷你缓冲区的类似右键机制的增强</h3>
<div class="outline-text-3" id="text-8-8">
<p>
<a href="https://github.com/oantolin/embark">embark</a> 插件提供了一系列的迷你缓冲区的类似右键机制的增强。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">embark</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap describe-bindings<span style="color: #67b11d;">]</span> . embark-bindings<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-'"</span> . embark-act<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> minibuffer-local-map
         <span style="color: #4f97d7;">:map</span> minibuffer-local-completion-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"TAB"</span> . minibuffer-force-complete<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> embark-file-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"E"</span> . consult-file-externally<span style="color: #2d9574;">)</span>      <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">Open file externally, or `</span><span style="color: #a45bad; background-color: #292e34;">we</span><span style="color: #2aa1ae; background-color: #292e34;">' in Ranger</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"O"</span> . consult-directory-externally<span style="color: #2d9574;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">Open directory externally</span>
         <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:init</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Optionally replace the key help with a completing-read interface</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> prefix-help-command #'embark-prefix-help-command<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Show Embark actions via which-key</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> embark-action-indicator
        <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #67b11d;">(</span>map<span style="color: #67b11d;">)</span>
          <span style="color: #67b11d;">(</span>which-key--show-keymap <span style="color: #2d9574;">"Embark"</span> map nil nil 'no-paging<span style="color: #67b11d;">)</span>
          #'which-key--hide-popup-ignore-command<span style="color: #2d9574;">)</span>
        embark-become-indicator embark-action-indicator<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">open directory</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">consult-directory-externally</span> <span style="color: #2d9574;">(</span>file<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"Open directory externally using the default application of the system."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"fOpen externally: "</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">and</span> <span style="color: #b1951d;">(</span>eq system-type 'windows-nt<span style="color: #b1951d;">)</span>
             <span style="color: #b1951d;">(</span>fboundp 'w32-shell-execute<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>shell-command-to-string <span style="color: #b1951d;">(</span>encode-coding-string <span style="color: #4f97d7;">(</span>replace-regexp-in-string <span style="color: #2d9574;">"/"</span> <span style="color: #2d9574;">"\\\\"</span>
                                                                                 <span style="color: #bc6ec5;">(</span>format <span style="color: #2d9574;">"explorer.exe %s"</span> <span style="color: #2d9574;">(</span>file-name-directory <span style="color: #9cb6ad;">(</span>expand-file-name file<span style="color: #9cb6ad;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span> <span style="color: #dc752f; background-color: #292b2e;">'gbk</span><span style="color: #b1951d; background-color: #292b2e;">)</span><span style="color: #67b11d; background-color: #292b2e;">)</span>
      <span style="color: #67b11d;">(</span>call-process <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">pcase</span> system-type
                      <span style="color: #4f97d7;">(</span>'darwin <span style="color: #2d9574;">"open"</span><span style="color: #4f97d7;">)</span>
                      <span style="color: #4f97d7;">(</span>'cygwin <span style="color: #2d9574;">"cygstart"</span><span style="color: #4f97d7;">)</span>
                      <span style="color: #4f97d7;">(</span>_ <span style="color: #2d9574;">"xdg-open"</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
                    nil 0 nil
                    <span style="color: #b1951d;">(</span>file-name-directory <span style="color: #4f97d7;">(</span>expand-file-name file<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Hide the mode line of the Embark live/completions buffers</span>
  <span style="color: #bc6ec5;">(</span>add-to-list 'display-buffer-alist
               '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\`\\*Embark Collect </span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">(</span><span style="color: #2d9574;">Live</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">Completions</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">)</span><span style="color: #2d9574;">\\*"</span>
                 nil
                 <span style="color: #67b11d;">(</span>window-parameters <span style="color: #b1951d;">(</span>mode-line-format . none<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">embark-consult</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>embark-collect-mode . consult-preview-at-point-mode<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org942f372" class="outline-3">
<h3 id="org942f372"><span class="section-number-3">8.9.</span> init-completion.el 文件尾</h3>
<div class="outline-text-3" id="text-8-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-completion</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-completion.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd0451f3" class="outline-2">
<h2 id="orgd0451f3"><span class="section-number-2">9.</span> init-dired.el</h2>
<div class="outline-text-2" id="text-9">
<p>
Emacs文件管理设置。
</p>
</div>

<div id="outline-container-orga40646c" class="outline-3">
<h3 id="orga40646c"><span class="section-number-3">9.1.</span> init-dired.el 文件头</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-dired.el --- Dired settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd41a14" class="outline-3">
<h3 id="orgbd41a14"><span class="section-number-3">9.2.</span> init-dired.el 文件尾</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-dired</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-dired.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org64e6af8" class="outline-2">
<h2 id="org64e6af8"><span class="section-number-2">10.</span> init-tools.el</h2>
<div class="outline-text-2" id="text-10">
</div>

<div id="outline-container-org0063b00" class="outline-3">
<h3 id="org0063b00"><span class="section-number-3">10.1.</span> init-tools.el 文件头</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-tools.el --- Tools settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary: Useful tools to make Emacs efficient!</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9fbe55" class="outline-3">
<h3 id="orgf9fbe55"><span class="section-number-3">10.2.</span> helpful帮助增强</h3>
<div class="outline-text-3" id="text-10-2">
<p>
<a href="https://github.com/Wilfred/helpful">helpful</a> 插件提供了帮助增强。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">helpful</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:commands</span> <span style="color: #bc6ec5;">(</span>helpful-callable helpful-variable helpful-command helpful-key helpful-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap describe-command<span style="color: #67b11d;">]</span> . helpful-command<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-h f"</span> . helpful-callable<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-h v"</span> . helpful-variable<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-h s"</span> . helpful-symbol<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-h S"</span> . describe-syntax<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-h m"</span> . describe-mode<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-h F"</span> . describe-face<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #67b11d;">[</span>remap describe-key<span style="color: #67b11d;">]</span> . helpful-key<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4834d9a" class="outline-3">
<h3 id="org4834d9a"><span class="section-number-3">10.3.</span> pass密码管理</h3>
<div class="outline-text-3" id="text-10-3">
<p>
通过 <a href="https://github.com/NicolasPetton/pass">pass</a> 插件来进行密码管理。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">pass</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:commands</span> <span style="color: #bc6ec5;">(</span>pass<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd7f7ac" class="outline-3">
<h3 id="orgbd7f7ac"><span class="section-number-3">10.4.</span> cnfonts 用于缩放字体</h3>
<div class="outline-text-3" id="text-10-4">
<p>
cnfonts 原来叫: chinese-fonts-setup, 是一个 Emacs 中英文字体配置工 具。可以比较方便地实现中文字体和英文字体等宽（也就是大家常说的中英 文对齐）。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">cnfonts</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:defer</span> 3
  <span style="color: #4f97d7;">:init</span> <span style="color: #bc6ec5;">(</span>cnfonts-mode t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span>define-key cnfonts-mode-map <span style="color: #2d9574;">(</span>kbd <span style="color: #2d9574;">"C--"</span><span style="color: #2d9574;">)</span> #'cnfonts-decrease-fontsize<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>define-key cnfonts-mode-map <span style="color: #2d9574;">(</span>kbd <span style="color: #2d9574;">"C-="</span><span style="color: #2d9574;">)</span> #'cnfonts-increase-fontsize<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga394cee" class="outline-3">
<h3 id="orga394cee"><span class="section-number-3">10.5.</span> init-tools.el 文件尾</h3>
<div class="outline-text-3" id="text-10-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-tools</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-tools.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org18aa7a3" class="outline-2">
<h2 id="org18aa7a3"><span class="section-number-2">11.</span> init-rss.el</h2>
<div class="outline-text-2" id="text-11">
<p>
Emacs的RSS新闻阅读设置
</p>
</div>

<div id="outline-container-org72d642a" class="outline-3">
<h3 id="org72d642a"><span class="section-number-3">11.1.</span> init-rss.el 文件头</h3>
<div class="outline-text-3" id="text-11-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-rss.el --- RSS settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orgbf83d92" class="outline-3">
<h3 id="orgbf83d92"><span class="section-number-3">11.2.</span> elfeed 一个非常棒的RSS新闻阅读客户端</h3>
<div class="outline-text-3" id="text-11-2">
<p>
<a href="https://github.com/skeeto/elfeed">elfeed</a> 插件是一个非常棒的RSS新闻阅读客户端。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">elfeed</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span>elfeed-new-entry . <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #b1951d;">()</span> <span style="color: #b1951d;">(</span>elfeed-make-tagger <span style="color: #4f97d7;">:feed-url</span> <span style="color: #2d9574;">"video"</span> <span style="color: #4f97d7;">:add</span> '<span style="color: #4f97d7;">(</span>video<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
                               <span style="color: #b1951d;">(</span>elfeed-make-tagger <span style="color: #4f97d7;">:entry-title</span> <span style="color: #2d9574;">"&#22270;&#21350;"</span> <span style="color: #4f97d7;">:add</span> '<span style="color: #4f97d7;">(</span>pic<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-x M-r"</span> . elfeed<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> elfeed-search-mode-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"g"</span> . elfeed-update<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"G"</span> . elfeed-search-update--force<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"o"</span> . elfeed-default-browser-open<span style="color: #2d9574;">)</span>
         <span style="color: #4f97d7;">:map</span> elfeed-show-mode-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"M-v"</span> . scroll-down-command<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"j"</span> . scroll-up-line<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"k"</span> . scroll-down-line<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> elfeed-db-directory <span style="color: #2d9574;">"~/.elfeed"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">capture template for elfeed</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">with-eval-after-load</span> 'org-capture
    <span style="color: #2d9574;">(</span>add-to-list 'org-capture-templates '<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"r"</span> <span style="color: #2d9574;">"Elfeed RSS"</span> entry <span style="color: #b1951d;">(</span>file+headline <span style="color: #2d9574;">"capture.org"</span> <span style="color: #2d9574;">"Elfeed"</span><span style="color: #b1951d;">)</span>
                                          <span style="color: #2d9574;">"* %:elfeed-entry-title :READ:\n%?\n%a"</span>
                                          <span style="color: #4f97d7;">:empty-lines-after</span> 1
                                          <span style="color: #4f97d7;">:prepend</span> t<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>add-to-list 'org-capture-templates-contexts '<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"r"</span> <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">(</span>in-mode . <span style="color: #2d9574;">"elfeed-show-mode"</span><span style="color: #4f97d7;">)</span>
                                                        <span style="color: #4f97d7;">(</span>in-mode . <span style="color: #2d9574;">"elfeed-search-mode"</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">================================</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">open entry with browser</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">================================</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">elfeed-default-browser-open</span> <span style="color: #2d9574;">(</span><span style="color: #ce537a; font-weight: bold;">&amp;optional</span> use-generic-p<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"open with default browser"</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"P"</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>entries <span style="color: #4f97d7;">(</span>elfeed-search-selected<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">cl-loop</span> for entry in entries
               do <span style="color: #b1951d;">(</span>elfeed-untag entry 'unread<span style="color: #b1951d;">)</span>
               when <span style="color: #b1951d;">(</span>elfeed-entry-link entry<span style="color: #b1951d;">)</span>
               do <span style="color: #b1951d;">(</span>browse-url it<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>mapc #'elfeed-search-update-entry entries<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">unless</span> <span style="color: #b1951d;">(</span>use-region-p<span style="color: #b1951d;">)</span> <span style="color: #b1951d;">(</span>forward-line<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>elfeed-feeds '<span style="color: #2d9574;">(</span>
                  <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"https://planet.emacslife.com/atom.xml"</span> emacs<span style="color: #67b11d;">)</span>
                  <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"http://www.dapenti.com/blog/rss2.asp?name=xilei"</span> news<span style="color: #67b11d;">)</span>
                  <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"https://remacs.cc/index.xml"</span> emacs<span style="color: #67b11d;">)</span>
                  <span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-use-curl t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-curl-max-connections 10<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-enclosure-default-dir <span style="color: #2d9574;">"~/Downloads/"</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">(elfeed-search-filter "@4-months-ago +")</span>
  <span style="color: #bc6ec5;">(</span>elfeed-search-filter <span style="color: #2d9574;">""</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-sort-order 'descending<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-search-clipboard-type 'CLIPBOARD<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-search-title-max-width 100<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-search-title-min-width 30<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-search-trailing-width 25<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-show-truncate-long-urls t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-show-unique-buffers t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>elfeed-search-date-format '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"%F %R"</span> 16 <span style="color: #4f97d7;">:left</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org007664f" class="outline-3">
<h3 id="org007664f"><span class="section-number-3">11.3.</span> elfeed-goodies给elfeed优化增强</h3>
<div class="outline-text-3" id="text-11-3">
<p>
我们通过 <a href="https://github.com/jeetelongname/elfeed-goodies">elfeed-goodies</a> 插件给 elfeed 进行优化增强：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">elfeed-goodies</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>after-init . elfeed-goodies/setup<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">set elfeed show entry switch function</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> elfeed-show-entry-switch #'elfeed-goodies/switch-pane<span style="color: #bc6ec5;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">switch-to-buffer, pop-to-buffer</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org647f62a" class="outline-3">
<h3 id="org647f62a"><span class="section-number-3">11.4.</span> init-rss.el 文件尾</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-rss</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-rss.el ends here</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5a274e7" class="outline-2">
<h2 id="org5a274e7"><span class="section-number-2">12.</span> init-shell.el</h2>
<div class="outline-text-2" id="text-12">
<p>
Emacs里的shell设置。
</p>
</div>

<div id="outline-container-org7a3fa39" class="outline-3">
<h3 id="org7a3fa39"><span class="section-number-3">12.1.</span> init-shell.el 文件头</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-shell.el --- (E)shell settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org1daca56" class="outline-3">
<h3 id="org1daca56"><span class="section-number-3">12.2.</span> eshell 基本配置</h3>
<div class="outline-text-3" id="text-12-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">eshell</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:functions</span> eshell/alias
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span>eshell-mode . <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">lambda</span> <span style="color: #b1951d;">()</span>
                          <span style="color: #b1951d;">(</span>term-mode-common-init<span style="color: #b1951d;">)</span>
                          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Remove cmd args word by word</span>
                          <span style="color: #b1951d;">(</span>modify-syntax-entry ?- <span style="color: #2d9574;">"w"</span><span style="color: #b1951d;">)</span>
                          <span style="color: #b1951d;">(</span>visual-line-mode 1<span style="color: #b1951d;">)</span>
                          <span style="color: #b1951d;">(</span>setenv <span style="color: #2d9574;">"PAGER"</span> <span style="color: #2d9574;">"cat"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
         <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">term-mode-common-init</span> <span style="color: #2d9574;">()</span>
    <span style="color: #9f8766;">"The common initialization for term."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-local</span> scroll-margin 0<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq-local</span> truncate-lines t<span style="color: #2d9574;">)</span>
    <span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;Emacs&#37324;&#36755;&#20837;vi&#65292;&#30452;&#25509;&#22312;buffer&#37324;&#25171;&#24320;&#25991;&#20214;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defalias</span> '<span style="color: #bc6ec5; font-weight: bold;">eshell/vi</span> 'find-file<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defalias</span> '<span style="color: #bc6ec5; font-weight: bold;">eshell/vim</span> 'find-file<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#35821;&#27861;&#39640;&#20142;&#26174;&#31034;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">eshell/bat</span> <span style="color: #2d9574;">(</span>file<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"cat FILE with syntax highlight."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">with-temp-buffer</span>
      <span style="color: #67b11d;">(</span>insert-file-contents file<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">(</span>buffer-file-name file<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">delay-mode-hooks</span>
          <span style="color: #4f97d7;">(</span>set-auto-mode<span style="color: #4f97d7;">)</span>
          <span style="color: #4f97d7;">(</span>font-lock-ensure<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>buffer-string<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defalias</span> '<span style="color: #bc6ec5; font-weight: bold;">eshell/cat</span> 'eshell/bat<span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#20132;&#20114;&#24335;&#36827;&#20837;&#30446;&#24405;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">eshell/z</span> <span style="color: #2d9574;">()</span>
    <span style="color: #9f8766;">"cd to directory with completion."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>dir <span style="color: #4f97d7;">(</span>completing-read <span style="color: #2d9574;">"Directory: "</span> <span style="color: #bc6ec5;">(</span>ring-elements eshell-last-dir-ring<span style="color: #bc6ec5;">)</span> nil t<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>eshell/cd dir<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#25214;&#25991;&#20214;</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">eshell/f</span> <span style="color: #2d9574;">(</span>filename <span style="color: #ce537a; font-weight: bold;">&amp;optional</span> dir<span style="color: #2d9574;">)</span>
    <span style="color: #9f8766;">"Search for files matching FILENAME in either DIR or the</span>
<span style="color: #9f8766;">current directory."</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>cmd <span style="color: #4f97d7;">(</span>concat
                <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">using find</span>
                <span style="color: #bc6ec5;">(</span>executable-find <span style="color: #2d9574;">"find"</span><span style="color: #bc6ec5;">)</span>
                <span style="color: #2d9574;">" "</span> <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">or</span> dir <span style="color: #2d9574;">"."</span><span style="color: #bc6ec5;">)</span>
                <span style="color: #2d9574;">" -not -path '</span><span style="color: #a45bad;">*/.git*</span><span style="color: #2d9574;">'"</span>            <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">ignore .git directory</span>
                <span style="color: #2d9574;">" -and -not -path '</span><span style="color: #a45bad;">build</span><span style="color: #2d9574;">'"</span>         <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">ignore cmake build directory</span>
                <span style="color: #2d9574;">" -and -not -path '</span><span style="color: #a45bad;">*/eln-cache*</span><span style="color: #2d9574;">'"</span>  <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">ignore eln cache</span>
                <span style="color: #2d9574;">" -and -type f -and -iname "</span>
                <span style="color: #2d9574;">"'*"</span> filename <span style="color: #2d9574;">"*'"</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>eshell-command-result cmd<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>

  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>eshell-banner-message
   '<span style="color: #2d9574;">(</span>format <span style="color: #2d9574;">"%s %s\n"</span>
            <span style="color: #67b11d;">(</span>propertize <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">" %s "</span> <span style="color: #4f97d7;">(</span>string-trim <span style="color: #bc6ec5;">(</span>buffer-name<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
                        'face 'mode-line-highlight<span style="color: #67b11d;">)</span>
            <span style="color: #67b11d;">(</span>propertize <span style="color: #b1951d;">(</span>current-time-string<span style="color: #b1951d;">)</span>
                        'face 'font-lock-keyword-face<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-scroll-to-bottom-on-input 'all<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-scroll-to-bottom-on-output 'all<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-kill-on-exit t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-kill-processes-on-exit t<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">Don't record command in history if starts with whitespace</span>
  <span style="color: #bc6ec5;">(</span>eshell-input-filter 'eshell-input-filter-initial-space<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-error-if-no-glob t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-glob-case-insensitive t<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">set scripts</span>
  <span style="color: #bc6ec5;">(</span>eshell-rc-script <span style="color: #2d9574;">(</span>locate-user-emacs-file <span style="color: #2d9574;">"etc/eshell/profile"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-login-script <span style="color: #2d9574;">(</span>locate-user-emacs-file <span style="color: #2d9574;">"etc/eshell/login"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2fc3100" class="outline-3">
<h3 id="org2fc3100"><span class="section-number-3">12.3.</span> eshell alias 设置</h3>
<div class="outline-text-3" id="text-12-3">
<div class="org-src-container">
<pre class="src src-text">alias ff find-file $1
alias fo find-file-other-window $1
alias d dired $1
alias ll ls -alh
alias l. ls -dh .*
alias up eshell-up $1
alias pk eshell-up-peek $1
alias less view-file $1
alias more view-file $1
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd329aa" class="outline-3">
<h3 id="orgfd329aa"><span class="section-number-3">12.4.</span> eshell 里的 C-d</h3>
<div class="outline-text-3" id="text-12-4">
<p>
让 <code>C-d</code> 更智能：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">em-rebind</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:commands</span> eshell-delchar-or-maybe-eof<span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">esh-mode</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7;">:map</span> eshell-mode-map
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-d"</span> . eshell-delchar-or-maybe-eof<span style="color: #2d9574;">)</span>
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-r"</span> . consult-history<span style="color: #2d9574;">)</span>
              <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"C-l"</span> . eshell/clear<span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff2090e" class="outline-3">
<h3 id="orgff2090e"><span class="section-number-3">12.5.</span> Eshell 的命令历史</h3>
<div class="outline-text-3" id="text-12-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">em-hist</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:defer</span> t
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>eshell-history-size 1024<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-hist-ignoredups t<span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-save-history-on-exit t<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1812f0" class="outline-3">
<h3 id="orge1812f0"><span class="section-number-3">12.6.</span> 有些命令使用 term</h3>
<div class="outline-text-3" id="text-12-6">
<p>
有一些命令如 top，我们还是使用 term：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">following commands will run on term instead</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">em-term</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:defer</span> t
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>eshell-visual-commands '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"top"</span> <span style="color: #2d9574;">"htop"</span> <span style="color: #2d9574;">"less"</span> <span style="color: #2d9574;">"more"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-visual-subcommands '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span><span style="color: #2d9574;">"git"</span> <span style="color: #2d9574;">"help"</span> <span style="color: #2d9574;">"lg"</span> <span style="color: #2d9574;">"log"</span> <span style="color: #2d9574;">"diff"</span> <span style="color: #2d9574;">"show"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-visual-options '<span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span><span style="color: #2d9574;">"git"</span> <span style="color: #2d9574;">"--help"</span> <span style="color: #2d9574;">"--paginate"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>eshell-destroy-buffer-when-process-dies t<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda11545" class="outline-3">
<h3 id="orgda11545"><span class="section-number-3">12.7.</span> eshell-git-prompt 命令行主题</h3>
<div class="outline-text-3" id="text-12-7">
<p>
<a href="https://github.com/xuchunyang/eshell-git-prompt">eshell-git-prompt</a> 插件提供了数个好看的 Eshell 命令行主题。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">eshell-git-prompt</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:after</span> esh-mode
  <span style="color: #4f97d7;">:custom-face</span>
  <span style="color: #bc6ec5;">(</span>eshell-git-prompt-multiline2-dir-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">:foreground</span> <span style="color: #2d9574;">"#c09035"</span> <span style="color: #4f97d7;">:bold</span> t<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span>eshell-git-prompt-use-theme 'multiline2<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6e72fb" class="outline-3">
<h3 id="orga6e72fb"><span class="section-number-3">12.8.</span> eshell-syntax-highlighting 语法高亮</h3>
<div class="outline-text-3" id="text-12-8">
<p>
<a href="https://github.com/akreisher/eshell-syntax-highlighting">eshell-syntax-highlighting</a> 插件为Eshell提供语法高亮。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">eshell-syntax-highlighting</span>
  <span style="color: #4f97d7;">:after</span> esh-mode
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>eshell-mode . eshell-syntax-highlighting-global-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:custom-face</span>
  <span style="color: #bc6ec5;">(</span>eshell-syntax-highlighting-shell-command-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">:foreground</span> <span style="color: #2d9574;">"#7cc77f"</span> <span style="color: #4f97d7;">:bold</span> t<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8480d83" class="outline-3">
<h3 id="org8480d83"><span class="section-number-3">12.9.</span> capf-autosuggest自动补全</h3>
<div class="outline-text-3" id="text-12-9">
<p>
<a href="https://github.com/emacsmirror/capf-autosuggest">capf-autosuggest</a> 提供Fish类似的Eshell命令自动补全功能。类似的插件还有 <a href="https://github.com/dieggsy/esh-autosuggest">esh-autosuggest</a>。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">capf-autosuggest</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span><span style="color: #2d9574;">(</span>eshell-mode comint-mode<span style="color: #2d9574;">)</span> . capf-autosuggest-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:custom-face</span>
  <span style="color: #bc6ec5;">(</span>capf-autosuggest-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">:foreground</span> <span style="color: #2d9574;">"#dae7ff"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org61a7794" class="outline-3">
<h3 id="org61a7794"><span class="section-number-3">12.10.</span> eshell-up快速进入父级文件夹</h3>
<div class="outline-text-3" id="text-12-10">
<p>
<a href="https://github.com/peterwvj/eshell-up">eshell-up</a> 插件可以快速进入当前文件夹的任何一个父级文件夹。通过 <code>up</code> 命令（已经设置了up 在eshell里的alias）进入当前文件夹的任何一级父目录。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">eshell-up</span>
  <span style="color: #4f97d7;">:ensure</span> t
  <span style="color: #4f97d7;">:commands</span> <span style="color: #bc6ec5;">(</span>eshell-up eshell-up-peek<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">to print the matching parent directory before changing to it</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> eshell-up-print-parent-dir t<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a6f134" class="outline-3">
<h3 id="org5a6f134"><span class="section-number-3">12.11.</span> init-shell.el 文件尾</h3>
<div class="outline-text-3" id="text-12-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-shell</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-shell.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf8e3baf" class="outline-2">
<h2 id="orgf8e3baf"><span class="section-number-2">13.</span> init-browser.el</h2>
<div class="outline-text-2" id="text-13">
</div>

<div id="outline-container-org3cf0a4b" class="outline-3">
<h3 id="org3cf0a4b"><span class="section-number-3">13.1.</span> init-browser.el 文件头</h3>
<div class="outline-text-3" id="text-13-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-browser.el --- Browser settings -*- lexical-binding: t -*-</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Commentary:</span>

<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">Code:</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org91e40d6" class="outline-3">
<h3 id="org91e40d6"><span class="section-number-3">13.2.</span> EWW 配置</h3>
<div class="outline-text-3" id="text-13-2">
<p>
Emacs 内置 EWW 浏览器配置。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">shr</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:defer</span> t
  <span style="color: #4f97d7;">:custom</span>
  <span style="color: #bc6ec5;">(</span>shr-inhibit-images t<span style="color: #bc6ec5;">)</span>                <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#26174;&#31034;&#22270;&#29255;</span>
  <span style="color: #bc6ec5;">(</span>shr-image-animate nil<span style="color: #bc6ec5;">)</span>               <span style="color: #2aa1ae; background-color: #292e34;">; </span><span style="color: #2aa1ae; background-color: #292e34;">&#19981;&#26174;&#31034; gif    </span>
  <span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">use-package</span> <span style="color: #a45bad;">eww</span>
  <span style="color: #4f97d7;">:ensure</span> nil
  <span style="color: #4f97d7;">:commands</span> eww eww-follow-link
  <span style="color: #4f97d7;">:hook</span> <span style="color: #bc6ec5;">(</span>eww-mode . visual-line-mode<span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:bind</span> <span style="color: #bc6ec5;">(</span>
         <span style="color: #4f97d7;">:map</span> eww-mode-map
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"o"</span> . eww-browse-with-external-browser<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"D"</span> . eww-forward-url<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"S"</span> . eww-back-url<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"f"</span> . link-hint-open-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"TAB"</span> . shr-next-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"&lt;backtab&gt;"</span> . shr-previous-link<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"j"</span> . scroll-up-line<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"k"</span> . scroll-down-line<span style="color: #2d9574;">)</span>
         <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">:config</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> eww-download-directory <span style="color: #2d9574;">(</span>expand-file-name <span style="color: #2d9574;">"~/Downloads"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span>custom-set-variables  
   '<span style="color: #2d9574;">(</span>eww-search-prefix <span style="color: #2d9574;">"https://cn.bing.com/search?q="</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org902333c" class="outline-3">
<h3 id="org902333c"><span class="section-number-3">13.3.</span> init-browser.el 文件尾</h3>
<div class="outline-text-3" id="text-13-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">provide</span> '<span style="color: #a45bad;">init-browser</span><span style="color: #4f97d7;">)</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #2aa1ae; background-color: #292e34;">;;; </span><span style="color: #2aa1ae; background-color: #292e34;">init-browser.el ends here</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">&#20316;&#32773;: yenao</p>
<p class="date">Created: 2023-11-20 周一 03:07</p>
</div>
</body>
</html>
